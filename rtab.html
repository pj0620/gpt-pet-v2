<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<!-- saved from url=(0094)https://wiki.ros.org/rtabmap_ros/Tutorials/SetupOnYourRobot#Kinect_.2B-_Odometry_.2B-_2D_laser -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=Edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="google-site-verification" content="CjkdY6BqKWAVmQ78_iSq6J7ZZ9AoL7-CjFVBYGg9FU4">
<link rel="shortcut icon" href="https://wiki.ros.org/custom/favicon.ico" type="image/ico">
<link rel="stylesheet" href="./rtabmap_ros_Tutorials_SetupOnYourRobot - ROS Wiki_files/bootstrap.min.css">
<script type="text/javascript" async="" src="./rtabmap_ros_Tutorials_SetupOnYourRobot - ROS Wiki_files/ga.js"></script><script src="./rtabmap_ros_Tutorials_SetupOnYourRobot - ROS Wiki_files/jquery-1.11.0.min.js"></script>
<script src="./rtabmap_ros_Tutorials_SetupOnYourRobot - ROS Wiki_files/bootstrap.min.js"></script>
<script type="text/javascript" src="./rtabmap_ros_Tutorials_SetupOnYourRobot - ROS Wiki_files/sorttable.js"></script>
<script type="text/javascript" src="./rtabmap_ros_Tutorials_SetupOnYourRobot - ROS Wiki_files/jquery.min.js"></script>                         
<script type="text/javascript" src="./rtabmap_ros_Tutorials_SetupOnYourRobot - ROS Wiki_files/seesaw.js"></script> 
<script type="text/javascript" src="./rtabmap_ros_Tutorials_SetupOnYourRobot - ROS Wiki_files/rosversion.js"></script> 
<!--script type="text/javascript" src="/custom/libraries/RGraph.common.core.js" ></script Used for metrics only, should be conditional, not at the top-->
<!--script type="text/javascript" src="/custom/libraries/RGraph.bar.js" ></script same as above -->

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-17821189-2']);
  _gaq.push(['_setDomainName', 'wiki.ros.org']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

<meta name="robots" content="index,nofollow">

<title>rtabmap_ros/Tutorials/SetupOnYourRobot - ROS Wiki</title>
<script type="text/javascript" src="./rtabmap_ros_Tutorials_SetupOnYourRobot - ROS Wiki_files/common.js"></script>

<script type="text/javascript">
<!--
var search_hint = "Search";
//-->
</script>


<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="./rtabmap_ros_Tutorials_SetupOnYourRobot - ROS Wiki_files/common.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="screen" href="./rtabmap_ros_Tutorials_SetupOnYourRobot - ROS Wiki_files/screen.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="print" href="./rtabmap_ros_Tutorials_SetupOnYourRobot - ROS Wiki_files/print.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="projection" href="./rtabmap_ros_Tutorials_SetupOnYourRobot - ROS Wiki_files/projection.css">

<!-- css only for MS IE6/IE7 browsers -->
<!--[if lt IE 8]>
   <link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="/moin_static197/rostheme/css/msie.css">
<![endif]-->




<link rel="canonical" href="http://wiki.ros.org/rtabmap_ros/Tutorials/SetupOnYourRobot">

<link rel="Start" href="https://wiki.ros.org/Documentation">
<link rel="Alternate" title="Wiki Markup" href="https://wiki.ros.org/action/raw/rtabmap_ros/Tutorials/SetupOnYourRobot?action=raw">
<link rel="Alternate" media="print" title="Print View" href="https://wiki.ros.org/action/print/rtabmap_ros/Tutorials/SetupOnYourRobot?action=print">
<link rel="Up" href="https://wiki.ros.org/rtabmap_ros/Tutorials">
<link rel="Appendix" title="azimut.png" href="https://wiki.ros.org/rtabmap_ros/Tutorials/SetupOnYourRobot?action=AttachFile&amp;do=view&amp;target=azimut.png">
<link rel="Appendix" title="bandwidthRtabmapviz.png" href="https://wiki.ros.org/rtabmap_ros/Tutorials/SetupOnYourRobot?action=AttachFile&amp;do=view&amp;target=bandwidthRtabmapviz.png">
<link rel="Appendix" title="bandwidthRviz.png" href="https://wiki.ros.org/rtabmap_ros/Tutorials/SetupOnYourRobot?action=AttachFile&amp;do=view&amp;target=bandwidthRviz.png">
<link rel="Appendix" title="mapping_localization_buttons.png" href="https://wiki.ros.org/rtabmap_ros/Tutorials/SetupOnYourRobot?action=AttachFile&amp;do=view&amp;target=mapping_localization_buttons.png">
<link rel="Appendix" title="remoteMapping.png" href="https://wiki.ros.org/rtabmap_ros/Tutorials/SetupOnYourRobot?action=AttachFile&amp;do=view&amp;target=remoteMapping.png">
<link rel="Appendix" title="setupA.png" href="https://wiki.ros.org/rtabmap_ros/Tutorials/SetupOnYourRobot?action=AttachFile&amp;do=view&amp;target=setupA.png">
<link rel="Appendix" title="setupA2.jpg" href="https://wiki.ros.org/rtabmap_ros/Tutorials/SetupOnYourRobot?action=AttachFile&amp;do=view&amp;target=setupA2.jpg">
<link rel="Appendix" title="setupAnew.jpg" href="https://wiki.ros.org/rtabmap_ros/Tutorials/SetupOnYourRobot?action=AttachFile&amp;do=view&amp;target=setupAnew.jpg">
<link rel="Appendix" title="setupB.png" href="https://wiki.ros.org/rtabmap_ros/Tutorials/SetupOnYourRobot?action=AttachFile&amp;do=view&amp;target=setupB.png">
<link rel="Appendix" title="setupC.png" href="https://wiki.ros.org/rtabmap_ros/Tutorials/SetupOnYourRobot?action=AttachFile&amp;do=view&amp;target=setupC.png">
<link rel="Appendix" title="setupD.png" href="https://wiki.ros.org/rtabmap_ros/Tutorials/SetupOnYourRobot?action=AttachFile&amp;do=view&amp;target=setupD.png">
<link rel="Appendix" title="setupE.png" href="https://wiki.ros.org/rtabmap_ros/Tutorials/SetupOnYourRobot?action=AttachFile&amp;do=view&amp;target=setupE.png">
<link rel="Appendix" title="setupE2.png" href="https://wiki.ros.org/rtabmap_ros/Tutorials/SetupOnYourRobot?action=AttachFile&amp;do=view&amp;target=setupE2.png">
<link rel="Appendix" title="setupLaserOnly.png" href="https://wiki.ros.org/rtabmap_ros/Tutorials/SetupOnYourRobot?action=AttachFile&amp;do=view&amp;target=setupLaserOnly.png">
<link rel="Appendix" title="setupLaserWheelOdometry.png" href="https://wiki.ros.org/rtabmap_ros/Tutorials/SetupOnYourRobot?action=AttachFile&amp;do=view&amp;target=setupLaserWheelOdometry.png">
<link rel="Search" href="https://wiki.ros.org/FindPage">
<link rel="Index" href="https://wiki.ros.org/TitleIndex">
<link rel="Glossary" href="https://wiki.ros.org/WordIndex">
<link rel="Help" href="https://wiki.ros.org/HelpOnFormatting">
</head>

<body lang="en" dir="ltr">

<!-- Google tag (gtag.js) -->
<script async="" src="./rtabmap_ros_Tutorials_SetupOnYourRobot - ROS Wiki_files/js"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-EVD5Z6G6NH');
</script>

<script type="text/javascript">
<!--// Initialize search form
var f = document.getElementById('searchform');
if(f) f.getElementsByTagName('label')[0].style.display = 'none';
var e = document.getElementById('searchinput');
if(e) {
  searchChange(e);
  searchBlur(e);
}

function handleSubmit() {
  var f = document.getElementById('searchform');
  var t = document.getElementById('searchinput');
  var r = document.getElementById('real_searchinput');

  //alert("handleSubmit "+ t.value);
  if(t.value.match(/review/)) {
    r.value = t.value;
  } else {
    //r.value = t.value + " -PackageReviewCategory -StackReviewCategory -M3Review -DocReview -ApiReview -HelpOn -BadContent -LocalSpellingWords";
    r.value = t.value + " -PackageReviewCategory -StackReviewCategory -DocReview -ApiReview";
  }
  //return validate(f);
}
//-->
</script>

<div id="dpage">
  <div id="dpage-inner">
    <div id="header"><div id="topnav">

<!-- Alert box -->
<!-- To enable/disable the alert box, uncomment/comment the block below and update the content below the button. -->
    <div class="alert alert-info alert-dismissable" style="text-align: center;">

<script>
jQuery(function( $ ){
    alert_box_name = 'roswiki_eol_alert'
    state = localStorage.getItem(alert_box_name);
    if (!state) {
      localStorage.setItem(alert_box_name, 'open');
    }
    state = localStorage.getItem(alert_box_name);
    if (state == 'closed') {
        $( '#topnav .alert' ).hide();
    }
    $( '.close' ).click(function () {
	console.log('in .close.click');
        localStorage.setItem(alert_box_name, 'closed');
        $( '#topnav .alert' ).hide();
  });
});
</script>
      <button type="button" class="close" data-dismiss="alert" aria-hidden="true">Ã—</button>
      The last ROS 1 release Noetic will go end of life on <a href="https://www.ros.org/blog/noetic-eol/">May 31st</a> with that the ROS Wiki (this website) will also be EOL and transition to being an archive.
    <strong>Maintainers:</strong>Please migrate any wiki content into your package's README.md file.
    If you need more help on migrating code please see this <a href="https://docs.ros.org/en/rolling/How-To-Guides/Migrating-from-ROS1.html">migration guide</a>.
    Or watch Shane's <a href="https://vimeo.com/1026038503?share=copy#t=392.022">Lightning Talk from ROSCon 2024</a>.
    </div>

<!-- End Alert box -->

      <table id="topnav-table">
        <tbody><tr>
          <td width="300" valign="top"><a href="https://wiki.ros.org/"><img border="0" src="./rtabmap_ros_Tutorials_SetupOnYourRobot - ROS Wiki_files/ros_org.png" alt="ros.org" width="238" height="51"></a></td>
          <td width="500" valign="middle">
            <a href="http://www.ros.org/about-ros">About</a>
            |
            <a href="https://wiki.ros.org/Support">Support</a>
            |
            <a href="http://discourse.ros.org/">Discussion Forum</a>
            |
            <a href="http://index.ros.org/">Index</a>
            |
            <a href="http://status.ros.org/">Service Status</a>
            |
            <a href="https://robotics.stackexchange.com/questions/tagged/ros">ros @ Robotics Stack Exchange</a>
          </td>

      </tr>
      <tr>
        <td colspan="3" height="53" width="1024"><nobr><img src="./rtabmap_ros_Tutorials_SetupOnYourRobot - ROS Wiki_files/menu_left.png" width="17" height="53" alt=""><a href="https://wiki.ros.org/"><img border="0" src="./rtabmap_ros_Tutorials_SetupOnYourRobot - ROS Wiki_files/menu_documentation.png" width="237" height="53" alt="Documentation"></a><img src="./rtabmap_ros_Tutorials_SetupOnYourRobot - ROS Wiki_files/menu_spacer.png" width="69" height="53"><a href="https://index.ros.org/?search_packages=true"><img border="0" src="./rtabmap_ros_Tutorials_SetupOnYourRobot - ROS Wiki_files/menu_browse_software.png" width="268" height="53" alt="Browse Software"></a><img src="./rtabmap_ros_Tutorials_SetupOnYourRobot - ROS Wiki_files/menu_spacer.png" width="69" height="53"><a href="https://discourse.ros.org/c/general"><img border="0" src="./rtabmap_ros_Tutorials_SetupOnYourRobot - ROS Wiki_files/menu_news.png" width="84" height="53" alt="News"></a><img src="./rtabmap_ros_Tutorials_SetupOnYourRobot - ROS Wiki_files/menu_spacer.png" width="69" height="53"><a href="https://wiki.ros.org/ROS/Installation"><img border="0" src="./rtabmap_ros_Tutorials_SetupOnYourRobot - ROS Wiki_files/menu_download.png" width="151" height="53" alt="Download"></a><img src="./rtabmap_ros_Tutorials_SetupOnYourRobot - ROS Wiki_files/menu_right.png" width="60" height="53"></nobr></td>

      </tr>
    </tbody></table> <!-- topnav-table -->

    </div> <!-- /#topav -->
  </div> <!-- /#header -->


<div id="header2">

<ul id="pagelocation">
<li><a href="https://wiki.ros.org/rtabmap_ros">rtabmap_ros</a></li><li><a href="https://wiki.ros.org/rtabmap_ros/Tutorials">Tutorials</a></li><li><a href="https://wiki.ros.org/rtabmap_ros/Tutorials/SetupOnYourRobot">SetupOnYourRobot</a></li>
</ul>

<div id="locationline">
</div>
</div>

<div id="sidebar">
<h4>ROS 2 Documentation</h4><p>The ROS Wiki is for ROS 1. Are you using ROS 2 (<a href="http://docs.ros.org/en/humble/">Humble</a>, <a href="http://docs.ros.org/en/iron/">Iron</a>, or <a href="http://docs.ros.org/en/rolling/">Rolling</a>)? <br><a href="http://docs.ros.org/">Check out the ROS 2 Project Documentation</a><br>Package specific documentation can be found on <a href="https://index.ros.org/">index.ros.org</a></p>
<div class="sidepanel">
<h1>Wiki</h1>

<ul id="navibar">
<li class="wikilink"><a href="https://wiki.ros.org/Distributions">Distributions</a></li><li class="wikilink"><a href="https://wiki.ros.org/ROS/Installation">ROS/Installation</a></li><li class="wikilink"><a href="https://wiki.ros.org/ROS/Tutorials">ROS/Tutorials</a></li><li class="wikilink"><a href="https://wiki.ros.org/RecentChanges">RecentChanges</a></li><li class="current"><a href="https://wiki.ros.org/rtabmap_ros/Tutorials/SetupOnYourRobot">SetupOnYourRobot</a></li>
</ul>

</div>
<div class="sidepanel">
<h1>Page</h1>
<ul class="editbar"><li><span class="disabled">Immutable Page</span></li><li class="toggleCommentsButton" style="display:none;"><a href="https://wiki.ros.org/rtabmap_ros/Tutorials/SetupOnYourRobot#" class="nbcomment" onclick="toggleComments();return false;">Comments</a></li><li><a class="nbinfo" href="https://wiki.ros.org/action/info/rtabmap_ros/Tutorials/SetupOnYourRobot?action=info" rel="nofollow">Info</a></li><li><a class="nbattachments" href="https://wiki.ros.org/action/AttachFile/rtabmap_ros/Tutorials/SetupOnYourRobot?action=AttachFile" rel="nofollow">Attachments</a></li><li>
<form class="actionsmenu" method="GET" action="https://wiki.ros.org/rtabmap_ros/Tutorials/SetupOnYourRobot">
<div>
    
    <select name="action" onchange="if ((this.selectedIndex != 0) &amp;&amp;
                      (this.options[this.selectedIndex].disabled == false)) {
                this.form.submit();
            }
            this.selectedIndex = 0;">
        <option value="show">More Actions:</option><option value="raw">Raw Text</option>
<option value="print">Print View</option>
<option value="RenderAsDocbook">Render as Docbook</option>
<option value="show" disabled="" class="disabled">Delete Cache</option>
<option value="show" disabled="" class="disabled">------------------------</option>
<option value="SpellCheck">Check Spelling</option>
<option value="LikePages">Like Pages</option>
<option value="LocalSiteMap">Local Site Map</option>
<option value="show" disabled="" class="disabled">------------------------</option>
<option value="RenamePage" disabled="" class="disabled">Rename Page</option>
<option value="CopyPage">Copy Page</option>
<option value="DeletePage" disabled="" class="disabled">Delete Page</option>
<option value="show" disabled="" class="disabled">------------------------</option>
<option value="MyPages">My Pages</option>
<option value="show" disabled="" class="disabled">Subscribe User</option>
<option value="show" disabled="" class="disabled">------------------------</option>
<option value="show" disabled="" class="disabled">Remove Spam</option>
<option value="show" disabled="" class="disabled">Revert to this revision</option>
<option value="PackagePages">Package Pages</option>
<option value="SyncPages">Sync Pages</option>
<option value="show" disabled="" class="disabled">------------------------</option>
<option value="CreatePdfDocument">CreatePdfDocument</option>
<option value="Load">Load</option>
<option value="RawFile">RawFile</option>
<option value="Save">Save</option>
<option value="SlideShow">SlideShow</option>
    </select>
    
    
</div>
<script type="text/javascript">
<!--// Init menu
actionsMenuInit('More Actions:');
//-->
</script>
</form>
</li></ul>

</div>
<div class="sidepanel">
<h1>User</h1>
<ul id="username"><li><a href="https://wiki.ros.org/action/login/rtabmap_ros/Tutorials/SetupOnYourRobot?action=login" id="login" rel="nofollow">Login</a></li></ul>
</div>
</div>

<div id="page" lang="en" dir="ltr">

<div dir="ltr" id="content" lang="en"><span class="anchor" id="top"></span>
<span class="anchor" id="line-1"></span><span class="anchor" id="line-2"></span><span class="anchor" id="line-3"></span><span class="anchor" id="line-4"></span><span class="anchor" id="line-5"></span><span class="anchor" id="line-6"></span><span class="anchor" id="line-7"></span><span class="anchor" id="line-8"></span><span class="anchor" id="line-9"></span><span class="anchor" id="line-10"></span><span class="anchor" id="line-11"></span><span class="anchor" id="line-12"></span><span class="anchor" id="line-13"></span><span class="anchor" id="line-14"></span><span class="anchor" id="line-15"></span><span class="anchor" id="line-16"></span><span class="anchor" id="line-17"></span><span class="anchor" id="line-18"></span><span class="anchor" id="line-19"></span><span class="anchor" id="line-20"></span><span class="anchor" id="line-21"></span><span class="anchor" id="line-22"></span><span class="anchor" id="line-23"></span><p class="line867"><span class="anchor" id="line-1-1"></span><span class="anchor" id="line-2-1"></span></p><div><table><tbody><tr>  <td style="background-color: #cce0ff"><strong>Note:</strong> This tutorial assumes that you have completed the previous tutorials:   <a class="http" href="http://wiki.ros.org/rtabmap_ros/Tutorials/HandHeldMapping">RGB-D Hand-Held Mapping With a Kinect</a>. </td>
</tr>
</tbody></table></div><span class="anchor" id="line-3-1"></span><span class="anchor" id="line-4-1"></span><span class="anchor" id="line-5-1"></span><span class="anchor" id="line-6-1"></span><div><table><tbody><tr>  <td style="background-color: #bbceee"> <img alt="(!)" height="15" src="./rtabmap_ros_Tutorials_SetupOnYourRobot - ROS Wiki_files/idea.png" title="(!)" width="15"> Please ask about problems and questions regarding this tutorial on <a class="http" href="http://answers.ros.org/">answers.ros.org</a>. Don't forget to include in your question the link to this page, the versions of your OS &amp; ROS, and also add appropriate tags.</td>
</tr>
</tbody></table></div><span class="anchor" id="line-7-1"></span><span class="anchor" id="line-8-1"></span><span class="anchor" id="line-9-1"></span>
<h1 id="Setup_RTAB-Map_on_Your_Robot.21">Setup RTAB-Map on Your Robot!</h1>
<span class="anchor" id="line-10-1"></span><strong>Description:</strong> This tutorial shows multiple RTAB-Map configurations that can be used on your robot.<br>
<br>
 <span class="anchor" id="line-11-1"></span><span class="anchor" id="line-12-1"></span><span class="anchor" id="line-13-1"></span><span class="anchor" id="line-14-1"></span><strong>Tutorial Level:</strong>  INTERMEDIATE <br>
 <br>
 <span class="anchor" id="line-15-1"></span><span class="anchor" id="line-16-1"></span><strong>Next Tutorial:</strong>   <a class="http" href="http://wiki.ros.org/rtabmap_ros/Tutorials/MappingAndNavigationOnTurtlebot">Mapping and Navigation with Turtlebot</a> <br>
 <br>
  <span class="anchor" id="line-17-1"></span><p class="line874"> <span class="anchor" id="line-24"></span><span class="anchor" id="line-25"></span></p><p class="line867"></p><div class="table-of-contents"><p class="table-of-contents-heading">Contents</p><ol><li>
<a href="https://wiki.ros.org/rtabmap_ros/Tutorials/SetupOnYourRobot#Introduction">Introduction</a></li><li>
<a href="https://wiki.ros.org/rtabmap_ros/Tutorials/SetupOnYourRobot#Bring-up_your_robot">Bring-up your robot</a><ol><li>
<a href="https://wiki.ros.org/rtabmap_ros/Tutorials/SetupOnYourRobot#Kinect_.2B-_Odometry_.2B-_2D_laser">Kinect + Odometry + 2D laser</a></li><li>
<a href="https://wiki.ros.org/rtabmap_ros/Tutorials/SetupOnYourRobot#Kinect_.2B-_Odometry_.2B-_Fake_2D_laser_from_Kinect">Kinect + Odometry + Fake 2D laser from Kinect</a></li><li>
<a href="https://wiki.ros.org/rtabmap_ros/Tutorials/SetupOnYourRobot#Kinect_.2B-_2D_laser">Kinect + 2D laser</a></li><li>
<a href="https://wiki.ros.org/rtabmap_ros/Tutorials/SetupOnYourRobot#A2D_laser_only">2D laser only</a></li><li>
<a href="https://wiki.ros.org/rtabmap_ros/Tutorials/SetupOnYourRobot#A2D_laser_.2B-_Wheel_Odometry_as_guess">2D laser + Wheel Odometry as guess</a></li><li>
<a href="https://wiki.ros.org/rtabmap_ros/Tutorials/SetupOnYourRobot#Kinect_.2B-_Odometry">Kinect + Odometry</a></li><li>
<a href="https://wiki.ros.org/rtabmap_ros/Tutorials/SetupOnYourRobot#Kinect">Kinect</a></li><li>
<a href="https://wiki.ros.org/rtabmap_ros/Tutorials/SetupOnYourRobot#Stereo_A">Stereo A</a></li><li>
<a href="https://wiki.ros.org/rtabmap_ros/Tutorials/SetupOnYourRobot#Stereo_B">Stereo B</a></li></ol></li><li>
<a href="https://wiki.ros.org/rtabmap_ros/Tutorials/SetupOnYourRobot#Navigation">Navigation</a></li><li>
<a href="https://wiki.ros.org/rtabmap_ros/Tutorials/SetupOnYourRobot#Remote_visualization">Remote visualization</a><ol><li>
<a href="https://wiki.ros.org/rtabmap_ros/Tutorials/SetupOnYourRobot#rtabmap_viz">rtabmap_viz</a></li><li>
<a href="https://wiki.ros.org/rtabmap_ros/Tutorials/SetupOnYourRobot#rviz">rviz</a></li></ol></li><li>
<a href="https://wiki.ros.org/rtabmap_ros/Tutorials/SetupOnYourRobot#Remote_visualization:_bandwidth_efficiency_with_RVIZ">Remote visualization: bandwidth efficiency with RVIZ</a><ol><li>
<a href="https://wiki.ros.org/rtabmap_ros/Tutorials/SetupOnYourRobot#rviz-1">rviz</a></li></ol></li><li>
<a href="https://wiki.ros.org/rtabmap_ros/Tutorials/SetupOnYourRobot#Remote_mapping">Remote mapping</a></li><li>
<a href="https://wiki.ros.org/rtabmap_ros/Tutorials/SetupOnYourRobot#Switching_between_Mapping_and_Localization">Switching between Mapping and Localization</a></li></ol></div><p class="line874"> <span class="anchor" id="line-26"></span><span class="anchor" id="line-27"></span></p><p class="line867">
</p><h2 id="Introduction">Introduction</h2>
<span class="anchor" id="line-28"></span><span class="anchor" id="line-29"></span><p class="line862">The robot must be equipped at least with a Kinect-like sensor. I <strong>recommend highly</strong> to calibrate your Kinect-like sensor following <a href="https://wiki.ros.org/openni_launch/Tutorials/IntrinsicCalibration">this guide</a>. If you want to use a 2D laser, the Kinect's clouds must be aligned with the laser scans. <span class="anchor" id="line-30"></span><span class="anchor" id="line-31"></span></p><p class="line874">I will present in the next sections some possible configurations depending on the robot with example launch files. <span class="anchor" id="line-32"></span><span class="anchor" id="line-33"></span></p><p class="line867"><strong>Recommended robot configuration</strong>: <span class="anchor" id="line-34"></span></p><ul><li><p class="line862">A 2D laser which outputs <a href="http://docs.ros.org/en/api/sensor_msgs/html/msg/LaserScan.html">sensor_msgs/LaserScan</a> messages. <span class="anchor" id="line-35"></span></p></li><li><p class="line862">Odometry (IMU, wheel encoders, ...) which outputs  <a href="http://docs.ros.org/en/api/nav_msgs/html/msg/Odometry.html">nav_msgs/Odometry</a> message. <span class="anchor" id="line-36"></span></p></li><li><p class="line862">A calibrated Kinect-like sensor compatible with <a href="https://wiki.ros.org/openni_launch">openni_launch</a>, <a href="https://wiki.ros.org/openni2_launch">openni2_launch</a> or <a href="https://wiki.ros.org/freenect_launch">freenect_launch</a> ros packages. <span class="anchor" id="line-37"></span><span class="anchor" id="line-38"></span></p></li></ul><p class="line862">These examples are based on what I did for <a class="https" href="https://introlab.3it.usherbrooke.ca/mediawiki-introlab/index.php/AZIMUT">AZIMUT3</a>. The robot is equipped with a Kinect, an URG-04LX and odometry is provided using the wheel encoders. <span class="anchor" id="line-39"></span><span class="anchor" id="line-40"></span></p><p class="line867"><img alt="AZIMUT3" class="attachment" src="./rtabmap_ros_Tutorials_SetupOnYourRobot - ROS Wiki_files/azimut.png" title="AZIMUT3" width="400"> <span class="anchor" id="line-41"></span><span class="anchor" id="line-42"></span></p><p class="line867">
</p><h2 id="Bring-up_your_robot">Bring-up your robot</h2>
<span class="anchor" id="line-43"></span><ul><li><p class="line862">If your robot has odometry: the robot should publish his odometry in <a href="http://docs.ros.org/en/api/nav_msgs/html/msg/Odometry.html">nav_msgs/Odometry</a> format. <span class="anchor" id="line-44"></span></p></li><li><p class="line862">If you have a laser: launch the laser node, it should publish <a href="http://docs.ros.org/en/api/sensor_msgs/html/msg/LaserScan.html">sensor_msgs/LaserScan</a> messages. Here we use <a href="https://wiki.ros.org/hokuyo_node">hokuyo_node</a> node. <span class="anchor" id="line-45"></span></p></li><li><p class="line862">Launch OpenNI with <strong>depth_registration:=true</strong>: <span class="anchor" id="line-46"></span></p><ul><li style="list-style-type:none"><span class="anchor" id="line-47"></span><span class="anchor" id="line-48"></span><pre><span class="anchor" id="line-1-2"></span> $ roslaunch openni_launch openni.launch depth_registration:=true</pre><span class="anchor" id="line-49"></span></li></ul></li><li><p class="line862">TF transforms must be provided (through using robot's <a href="https://wiki.ros.org/robot_state_publisher">URDF</a> or manually in a file using <a href="https://wiki.ros.org/tf#static_transform_publisher">static transform publishers</a>). The main useful transforms are "/odom", "/base_link", "/base_laser_link" and "/camera_link". <span class="anchor" id="line-50"></span><span class="anchor" id="line-51"></span></p></li></ul><p class="line867">
</p><h3 id="Kinect_.2B-_Odometry_.2B-_2D_laser">Kinect + Odometry + 2D laser</h3>
<span class="anchor" id="line-52"></span><span class="anchor" id="line-53"></span><p class="line862">In this configuration, I assume that you have a wheeled robot constrained to the plane XY with only rotation on <tt class="backtick">yaw</tt> (around z-axis). <span class="anchor" id="line-54"></span><span class="anchor" id="line-55"></span></p><p class="line867"><img alt="Kinect + Odometry + 2D laser" class="attachment" src="./rtabmap_ros_Tutorials_SetupOnYourRobot - ROS Wiki_files/setupA.png" title="Kinect + Odometry + 2D laser" width="800"> <span class="anchor" id="line-56"></span><span class="anchor" id="line-57"></span></p><p class="line867"><span class="anchor" id="line-58"></span><span class="anchor" id="line-59"></span><span class="anchor" id="line-60"></span><span class="anchor" id="line-61"></span><span class="anchor" id="line-62"></span><span class="anchor" id="line-63"></span><span class="anchor" id="line-64"></span><span class="anchor" id="line-65"></span><span class="anchor" id="line-66"></span><span class="anchor" id="line-67"></span><span class="anchor" id="line-68"></span><span class="anchor" id="line-69"></span><span class="anchor" id="line-70"></span><span class="anchor" id="line-71"></span><span class="anchor" id="line-72"></span><span class="anchor" id="line-73"></span><span class="anchor" id="line-74"></span><span class="anchor" id="line-75"></span><span class="anchor" id="line-76"></span><span class="anchor" id="line-77"></span><span class="anchor" id="line-78"></span><span class="anchor" id="line-79"></span><span class="anchor" id="line-80"></span><span class="anchor" id="line-81"></span><span class="anchor" id="line-82"></span><span class="anchor" id="line-83"></span><span class="anchor" id="line-84"></span><span class="anchor" id="line-85"></span><span class="anchor" id="line-86"></span><span class="anchor" id="line-87"></span><span class="anchor" id="line-88"></span><span class="anchor" id="line-89"></span><span class="anchor" id="line-90"></span><span class="anchor" id="line-91"></span><span class="anchor" id="line-92"></span><span class="anchor" id="line-93"></span><span class="anchor" id="line-94"></span><span class="anchor" id="line-95"></span><span class="anchor" id="line-96"></span><span class="anchor" id="line-97"></span><span class="anchor" id="line-98"></span><span class="anchor" id="line-99"></span><span class="anchor" id="line-100"></span><span class="anchor" id="line-101"></span><span class="anchor" id="line-102"></span><span class="anchor" id="line-103"></span><span class="anchor" id="line-104"></span><span class="anchor" id="line-105"></span></p><pre><span class="anchor" id="line-1-3"></span>&lt;launch&gt;
<span class="anchor" id="line-2-2"></span>  &lt;group ns="rtabmap"&gt;
<span class="anchor" id="line-3-2"></span>
<span class="anchor" id="line-4-2"></span>    &lt;!-- Use RGBD synchronization --&gt;
<span class="anchor" id="line-5-2"></span>    &lt;!-- Here is a general example using a standalone nodelet, 
<span class="anchor" id="line-6-2"></span>         but it is recommended to attach this nodelet to nodelet 
<span class="anchor" id="line-7-2"></span>         manager of the camera to avoid topic serialization --&gt;
<span class="anchor" id="line-8-2"></span>    &lt;node pkg="nodelet" type="nodelet" name="rgbd_sync" args="standalone rtabmap_sync/rgbd_sync" output="screen"&gt;
<span class="anchor" id="line-9-2"></span>      &lt;remap from="rgb/image"       to="/camera/rgb/image_rect_color"/&gt;
<span class="anchor" id="line-10-2"></span>      &lt;remap from="depth/image"     to="/camera/depth_registered/image_raw"/&gt;
<span class="anchor" id="line-11-2"></span>      &lt;remap from="rgb/camera_info" to="/camera/rgb/camera_info"/&gt;
<span class="anchor" id="line-12-2"></span>      &lt;remap from="rgbd_image"      to="rgbd_image"/&gt; &lt;!-- output --&gt;
<span class="anchor" id="line-13-2"></span>      
<span class="anchor" id="line-14-2"></span>      &lt;!-- Should be true for not synchronized camera topics 
<span class="anchor" id="line-15-2"></span>           (e.g., false for kinectv2, zed, realsense, true for xtion, kinect360)--&gt;
<span class="anchor" id="line-16-2"></span>      &lt;param name="approx_sync"       value="true"/&gt; 
<span class="anchor" id="line-17-2"></span>    &lt;/node&gt;
<span class="anchor" id="line-18-1"></span>
<span class="anchor" id="line-19-1"></span>    &lt;node name="rtabmap" pkg="rtabmap_slam" type="rtabmap" output="screen" args="--delete_db_on_start"&gt;
<span class="anchor" id="line-20-1"></span>          &lt;param name="frame_id" type="string" value="base_link"/&gt;
<span class="anchor" id="line-21-1"></span>
<span class="anchor" id="line-22-1"></span>          &lt;param name="subscribe_depth" type="bool" value="false"/&gt;
<span class="anchor" id="line-23-1"></span>          &lt;param name="subscribe_rgbd" type="bool" value="true"/&gt;
<span class="anchor" id="line-24-1"></span>          &lt;param name="subscribe_scan" type="bool" value="true"/&gt;
<span class="anchor" id="line-25-1"></span>
<span class="anchor" id="line-26-1"></span>          &lt;remap from="odom" to="/base_controller/odom"/&gt;
<span class="anchor" id="line-27-1"></span>          &lt;remap from="scan" to="/base_scan"/&gt;
<span class="anchor" id="line-28-1"></span>          &lt;remap from="rgbd_image" to="rgbd_image"/&gt;
<span class="anchor" id="line-29-1"></span>
<span class="anchor" id="line-30-1"></span>          &lt;param name="queue_size" type="int" value="10"/&gt;
<span class="anchor" id="line-31-1"></span>
<span class="anchor" id="line-32-1"></span>          &lt;!-- RTAB-Map's parameters --&gt;
<span class="anchor" id="line-33-1"></span>          &lt;param name="RGBD/NeighborLinkRefining" type="string" value="true"/&gt;
<span class="anchor" id="line-34-1"></span>          &lt;param name="RGBD/ProximityBySpace"     type="string" value="true"/&gt;
<span class="anchor" id="line-35-1"></span>          &lt;param name="RGBD/AngularUpdate"        type="string" value="0.01"/&gt;
<span class="anchor" id="line-36-1"></span>          &lt;param name="RGBD/LinearUpdate"         type="string" value="0.01"/&gt;
<span class="anchor" id="line-37-1"></span>          &lt;param name="RGBD/OptimizeFromGraphEnd" type="string" value="false"/&gt;
<span class="anchor" id="line-38-1"></span>          &lt;param name="Grid/FromDepth"            type="string" value="false"/&gt; &lt;!-- occupancy grid from lidar --&gt;
<span class="anchor" id="line-39-1"></span>          &lt;param name="Reg/Force3DoF"             type="string" value="true"/&gt;
<span class="anchor" id="line-40-1"></span>          &lt;param name="Reg/Strategy"              type="string" value="1"/&gt; &lt;!-- 1=ICP --&gt;
<span class="anchor" id="line-41-1"></span>          
<span class="anchor" id="line-42-1"></span>          &lt;!-- ICP parameters --&gt;
<span class="anchor" id="line-43-1"></span>          &lt;param name="Icp/VoxelSize"                 type="string" value="0.05"/&gt;
<span class="anchor" id="line-44-1"></span>          &lt;param name="Icp/MaxCorrespondenceDistance" type="string" value="0.1"/&gt;
<span class="anchor" id="line-45-1"></span>    &lt;/node&gt;
<span class="anchor" id="line-46-1"></span>  &lt;/group&gt;
<span class="anchor" id="line-47-1"></span>&lt;/launch&gt;</pre><span class="anchor" id="line-106"></span><span class="anchor" id="line-107"></span><p class="line874">Let's break down this launch file: <span class="anchor" id="line-108"></span><span class="anchor" id="line-109"></span><span class="anchor" id="line-110"></span></p><pre><span class="anchor" id="line-1-4"></span> &lt;group ns="rtabmap"&gt;</pre><span class="anchor" id="line-111"></span><p class="line862">For convenience, we put <a href="https://wiki.ros.org/rtabmap_slam#rtabmap">rtabmap</a> node in rtabmap namespace. <a href="https://wiki.ros.org/rtabmap_slam#rtabmap">rtabmap</a> node provides services which can conflict with other services from other nodes. <span class="anchor" id="line-112"></span><span class="anchor" id="line-113"></span></p><p class="line867"><span class="anchor" id="line-114"></span><span class="anchor" id="line-115"></span><span class="anchor" id="line-116"></span><span class="anchor" id="line-117"></span><span class="anchor" id="line-118"></span><span class="anchor" id="line-119"></span><span class="anchor" id="line-120"></span><span class="anchor" id="line-121"></span><span class="anchor" id="line-122"></span></p><pre><span class="anchor" id="line-1-5"></span>&lt;node pkg="nodelet" type="nodelet" name="rgbd_sync" args="standalone rtabmap_sync/rgbd_sync" output="screen"&gt;
<span class="anchor" id="line-2-3"></span>  &lt;remap from="rgb/image"        to="/camera/rgb/image_rect_color"/&gt;
<span class="anchor" id="line-3-3"></span>  &lt;remap from="depth/image"      to="/camera/depth_registered/image_raw"/&gt;
<span class="anchor" id="line-4-3"></span>  &lt;remap from="rgb/camera_info"  to="/camera/rgb/camera_info"/&gt;
<span class="anchor" id="line-5-3"></span>  &lt;remap from="rgbd_image"       to="rgbd_image"/&gt; 
<span class="anchor" id="line-6-3"></span>
<span class="anchor" id="line-7-3"></span>  &lt;param name="approx_sync"       value="true"/&gt; 
<span class="anchor" id="line-8-3"></span>&lt;/node&gt;</pre><span class="anchor" id="line-123"></span><p class="line862">In this example, because <a href="https://wiki.ros.org/rtabmap_slam#rtabmap">rtabmap</a> node synchronizes topics coming from different sensors, we use <a href="https://wiki.ros.org/rtabmap_sync#rtabmap_sync.2Frgbd_sync">rgbd_sync</a> nodelet to make sure that our image topics are correctly synchronized together before feeding them to <a href="https://wiki.ros.org/rtabmap_slam#rtabmap">rtabmap</a>. The output <tt class="backtick">rgbd_image</tt> is a <a class="http" href="http://docs.ros.org/api/rtabmap_msgs/html/msg/RGBDImage.html">rtabmap_msgs/RGBDImage</a> message. The parameter <tt class="backtick">approx_sync</tt> should be true when camera topics are not already synchronized by the camera node like here for freenect or openni2 drivers for Kinect For Xbox 360. <tt class="backtick">approx_sync</tt> should be false with camera drivers for Kinect v2, ZED or realsense as they publish rgb and depth topics already synchronized (same stamp). <span class="anchor" id="line-124"></span><span class="anchor" id="line-125"></span></p><p class="line867"><span class="anchor" id="line-126"></span><span class="anchor" id="line-127"></span></p><pre><span class="anchor" id="line-1-6"></span>&lt;node name="rtabmap" pkg="rtabmap_slam" type="rtabmap" output="screen" args="--delete_db_on_start"&gt;</pre><span class="anchor" id="line-128"></span><p class="line862">The <tt class="backtick">--delete_db_on_start</tt> argument will make <a href="https://wiki.ros.org/rtabmap_slam#rtabmap">rtabmap</a> to delete the database (default located in <tt class="backtick">~/.ros/rtabmap.db</tt>) when starting. If you want the robot to continue mapping from a previous mapping session, you should remove <tt class="backtick">--delete_db_on_start</tt>. <span class="anchor" id="line-129"></span><span class="anchor" id="line-130"></span></p><p class="line867"><span class="anchor" id="line-131"></span><span class="anchor" id="line-132"></span></p><pre><span class="anchor" id="line-1-7"></span>&lt;param name="frame_id" type="string" value="base_link"/&gt;</pre><span class="anchor" id="line-133"></span><p class="line874">The "frame_id" should be a fixed frame on the robot. <span class="anchor" id="line-134"></span><span class="anchor" id="line-135"></span></p><p class="line867"><span class="anchor" id="line-136"></span><span class="anchor" id="line-137"></span><span class="anchor" id="line-138"></span></p><pre><span class="anchor" id="line-1-8"></span>&lt;param name="subscribe_depth" type="bool" value="true"/&gt;
<span class="anchor" id="line-2-4"></span>&lt;param name="subscribe_scan" type="bool" value="true"/&gt;</pre><span class="anchor" id="line-139"></span><p class="line862">By default, <tt class="backtick">subscribe_depth</tt> is true. However, in this setup, we will use RGB-D image input instead, so <tt class="backtick">subscribe_depth</tt> is set to false and <tt class="backtick">subscribe_rgbd</tt> is set to true.  Since we have a 2D lidar, set <tt class="backtick">subscribe_scan</tt> to true. If we have a 3D lidar publishing <a class="http" href="http://docs.ros.org/api/sensor_msgs/html/msg/PointCloud2.html">sensor_msgs/PointCloud2</a> messages, set <tt class="backtick">subscribe_scan_cloud</tt> to true instead and remap corresponding <tt class="backtick">scan_cloud</tt> topic instead of <tt class="backtick">scan</tt>. <span class="anchor" id="line-140"></span></p><ul><li><p class="line862">When <tt class="backtick">subscribe_rgbd=true</tt>, <tt class="backtick">rgbd_image</tt> input topic should be set. <span class="anchor" id="line-141"></span></p></li><li><p class="line862">When <tt class="backtick">subscribe_scan=true</tt>, <tt class="backtick">scan</tt> input topics should be set. <span class="anchor" id="line-142"></span><span class="anchor" id="line-143"></span></p></li></ul><p class="line867"><span class="anchor" id="line-144"></span><span class="anchor" id="line-145"></span><span class="anchor" id="line-146"></span><span class="anchor" id="line-147"></span></p><pre><span class="anchor" id="line-1-9"></span>&lt;remap from="odom" to="/base_controller/odom"/&gt;
<span class="anchor" id="line-2-5"></span>&lt;remap from="scan" to="/base_scan"/&gt;
<span class="anchor" id="line-3-4"></span>&lt;remap from="rgbd_image" to="rgbd_image"/&gt;</pre><span class="anchor" id="line-148"></span><p class="line862">Set the required input topics. Note that <tt class="backtick">rgbd_image</tt> doesn't have leading slash, which means it subscribe to <tt class="backtick">rgbd_image</tt> in its namespace, which would be <tt class="backtick">/rtabmap/rgbd_image</tt> in this case. <span class="anchor" id="line-149"></span><span class="anchor" id="line-150"></span></p><p class="line867"><span class="anchor" id="line-151"></span><span class="anchor" id="line-152"></span></p><pre><span class="anchor" id="line-1-10"></span>&lt;param name="queue_size" type="int" value="10"/&gt;</pre><span class="anchor" id="line-153"></span><p class="line862">Used for synchronization of the input topics above. The <a href="https://wiki.ros.org/rtabmap_slam#rtabmap">rtabmap</a> node synchronizes <tt class="backtick">/base_controller/odom</tt>, <tt class="backtick">/base_scan</tt> and <tt class="backtick">/rtabmap/rgbd_image</tt> in a single callback. Higher the value, more flexible can be the rate used for each topic. On AZIMUT3, <tt class="backtick">/base_controller/odom</tt> is published at 50 Hz, <tt class="backtick">/base_scan</tt> at 10 Hz, and the images at 30 Hz. <span class="anchor" id="line-154"></span><span class="anchor" id="line-155"></span></p><p class="line867"><span class="anchor" id="line-156"></span><span class="anchor" id="line-157"></span><span class="anchor" id="line-158"></span><span class="anchor" id="line-159"></span><span class="anchor" id="line-160"></span><span class="anchor" id="line-161"></span><span class="anchor" id="line-162"></span><span class="anchor" id="line-163"></span><span class="anchor" id="line-164"></span><span class="anchor" id="line-165"></span><span class="anchor" id="line-166"></span><span class="anchor" id="line-167"></span><span class="anchor" id="line-168"></span><span class="anchor" id="line-169"></span></p><pre><span class="anchor" id="line-1-11"></span>&lt;!-- RTAB-Map's parameters --&gt;
<span class="anchor" id="line-2-6"></span>&lt;param name="RGBD/NeighborLinkRefining" type="string" value="true"/&gt;
<span class="anchor" id="line-3-5"></span>&lt;param name="RGBD/ProximityBySpace"     type="string" value="true"/&gt;
<span class="anchor" id="line-4-4"></span>&lt;param name="RGBD/AngularUpdate"        type="string" value="0.01"/&gt;
<span class="anchor" id="line-5-4"></span>&lt;param name="RGBD/LinearUpdate"         type="string" value="0.01"/&gt;
<span class="anchor" id="line-6-4"></span>&lt;param name="RGBD/OptimizeFromGraphEnd" type="string" value="false"/&gt;
<span class="anchor" id="line-7-4"></span>&lt;param name="Grid/FromDepth"            type="string" value="false"/&gt; 
<span class="anchor" id="line-8-4"></span>&lt;param name="Reg/Force3DoF"             type="string" value="true"/&gt;
<span class="anchor" id="line-9-3"></span>&lt;param name="Reg/Strategy"              type="string" value="1"/&gt; &lt;!-- 1=ICP --&gt;
<span class="anchor" id="line-10-3"></span>
<span class="anchor" id="line-11-3"></span>&lt;!-- ICP parameters --&gt;
<span class="anchor" id="line-12-3"></span>&lt;param name="Icp/VoxelSize"                 type="string" value="0.05"/&gt;
<span class="anchor" id="line-13-3"></span>&lt;param name="Icp/MaxCorrespondenceDistance" type="string" value="0.1"/&gt;</pre><span class="anchor" id="line-170"></span><p class="line874">This section sets the RTAB-Map's parameters (the same as in Preferences dialog in the standalone version). To know all RTAB-Map's parameters that can be set with some descriptions, execute this command: <span class="anchor" id="line-171"></span></p><ul><li style="list-style-type:none"><span class="anchor" id="line-172"></span><span class="anchor" id="line-173"></span><pre><span class="anchor" id="line-1-12"></span> $ rosrun rtabmap_slam rtabmap --params</pre><span class="anchor" id="line-174"></span></li></ul><p class="line874">Here is a brief overview of the main parameters set here: <span class="anchor" id="line-175"></span></p><ul><li><p class="line891"><tt class="backtick">RGBD/NeighborLinkRefining</tt>: Correct odometry using the input lidar topic using ICP. <span class="anchor" id="line-176"></span></p></li><li><p class="line891"><tt class="backtick">RGBD/ProximityBySpace</tt>: Find local loop closures based on the robot position in the map. It is useful when the robot, for example, is coming back in the opposite direction. With camera facing back, global loop closures cannot be found. So using the position and previously added laser scans to the map, we find the transform using ICP. <span class="anchor" id="line-177"></span></p></li><li><p class="line891"><tt class="backtick">RGBD/AngularUpdate</tt>: The robot should move to update the map (if not 0). <span class="anchor" id="line-178"></span></p></li><li><p class="line891"><tt class="backtick">RGBD/LinearUpdate</tt>: The robot should move to update the map (if not 0). <span class="anchor" id="line-179"></span></p></li><li><p class="line891"><tt class="backtick">RGBD/OptimizeFromGraphEnd</tt>: By setting to false (which is the default), on loop closures the graph will be optimized from the first pose in the map. The TF <tt class="backtick">/map&nbsp;-&gt;&nbsp;/odom</tt> will change when this happens. When set to false, the graph is optimized from the latest node added to the map instead of the first. By optimizing from the last, the last pose keeps its value and all the previous poses are corrected according to it (so <tt class="backtick">/odom</tt> and <tt class="backtick">/map</tt> will always match together). <span class="anchor" id="line-180"></span></p></li><li><p class="line891"><tt class="backtick">Grid/FromDepth</tt>: If true, the occupancy grid is created from the cloud generated by the depth camera. If false, the occupancy grid is created from the laser scans. <span class="anchor" id="line-181"></span></p></li><li><p class="line891"><tt class="backtick">Reg/Force3DoF</tt>: Force 3DoF registration: <tt class="backtick">roll</tt>, <tt class="backtick">pitch</tt> and <tt class="backtick">z</tt> won't be estimated. <span class="anchor" id="line-182"></span></p></li><li><p class="line891"><tt class="backtick">Reg/Strategy</tt>: We chose ICP to refine global loop closures found with ICP using the laser scans. <span class="anchor" id="line-183"></span></p></li><li><p class="line891"><tt class="backtick">Icp/VoxelSize</tt>: Scans are filtered down to voxel of 5 cm before doing ICP. <span class="anchor" id="line-184"></span></p></li><li><p class="line891"><tt class="backtick">Icp/MaxCorrespondenceDistance</tt>: Maximum distance between points during registration by ICP. <span class="anchor" id="line-185"></span><span class="anchor" id="line-186"></span></p></li></ul><p class="line867"><span class="anchor" id="line-187"></span><span class="anchor" id="line-188"></span><span class="anchor" id="line-189"></span></p><pre><span class="anchor" id="line-1-13"></span>  &lt;/node&gt;
<span class="anchor" id="line-2-7"></span>&lt;/group&gt;</pre><span class="anchor" id="line-190"></span><p class="line874">Close the group. <span class="anchor" id="line-191"></span><span class="anchor" id="line-192"></span></p><p class="line867">
</p><h3 id="Kinect_.2B-_Odometry_.2B-_Fake_2D_laser_from_Kinect">Kinect + Odometry + Fake 2D laser from Kinect</h3>
<span class="anchor" id="line-193"></span><span class="anchor" id="line-194"></span><p class="line867"><img alt="Kinect + Odometry + Fake 2D laser from Kinect" class="attachment" src="./rtabmap_ros_Tutorials_SetupOnYourRobot - ROS Wiki_files/setupA2.jpg" title="Kinect + Odometry + Fake 2D laser from Kinect" width="800"> <span class="anchor" id="line-195"></span><span class="anchor" id="line-196"></span></p><p class="line862">If you don't have a laser and you want to create a 2D occupancy grid map (for which laser scans are required), you can simulate a 2D laser with the depth image from the Kinect using <a href="https://wiki.ros.org/depthimage_to_laserscan">depthimage_to_laserscan</a> ros-pkg. This was the configuration used for the <a class="https" href="https://github.com/introlab/rtabmap/wiki/IROS-2014-Kinect-Challenge">IROS 2014 Kinect Contest</a>. This could be also used with a robot like the <a class="http" href="http://www.turtlebot.com/">TurtleBot</a>. Unlike with a real lidar on example above, I don't recommend setting <tt class="backtick">Reg/Strategy</tt> to 1 (for ICP) because the field of view of the camera is too small to have good ICP registrations.  <span class="anchor" id="line-197"></span><span class="anchor" id="line-198"></span></p><p class="line867"><span class="anchor" id="line-199"></span><span class="anchor" id="line-200"></span><span class="anchor" id="line-201"></span><span class="anchor" id="line-202"></span><span class="anchor" id="line-203"></span><span class="anchor" id="line-204"></span><span class="anchor" id="line-205"></span><span class="anchor" id="line-206"></span><span class="anchor" id="line-207"></span><span class="anchor" id="line-208"></span><span class="anchor" id="line-209"></span><span class="anchor" id="line-210"></span><span class="anchor" id="line-211"></span><span class="anchor" id="line-212"></span><span class="anchor" id="line-213"></span><span class="anchor" id="line-214"></span><span class="anchor" id="line-215"></span><span class="anchor" id="line-216"></span><span class="anchor" id="line-217"></span><span class="anchor" id="line-218"></span><span class="anchor" id="line-219"></span><span class="anchor" id="line-220"></span><span class="anchor" id="line-221"></span><span class="anchor" id="line-222"></span><span class="anchor" id="line-223"></span><span class="anchor" id="line-224"></span><span class="anchor" id="line-225"></span><span class="anchor" id="line-226"></span><span class="anchor" id="line-227"></span><span class="anchor" id="line-228"></span><span class="anchor" id="line-229"></span><span class="anchor" id="line-230"></span><span class="anchor" id="line-231"></span><span class="anchor" id="line-232"></span><span class="anchor" id="line-233"></span><span class="anchor" id="line-234"></span><span class="anchor" id="line-235"></span></p><pre><span class="anchor" id="line-1-14"></span>&lt;launch&gt;
<span class="anchor" id="line-2-8"></span>  &lt;!-- Kinect cloud to laser scan --&gt;
<span class="anchor" id="line-3-6"></span>    &lt;node pkg="depthimage_to_laserscan" type="depthimage_to_laserscan" name="depthimage_to_laserscan"&gt;
<span class="anchor" id="line-4-5"></span>      &lt;remap from="image"       to="/camera/depth_registered/image_raw"/&gt;
<span class="anchor" id="line-5-5"></span>      &lt;remap from="camera_info" to="/camera/depth_registered/camera_info"/&gt;
<span class="anchor" id="line-6-5"></span>      &lt;remap from="scan"        to="/kinect_scan"/&gt;
<span class="anchor" id="line-7-5"></span>      &lt;param name="range_max" type="double" value="4"/&gt;
<span class="anchor" id="line-8-5"></span>    &lt;/node&gt;
<span class="anchor" id="line-9-4"></span>
<span class="anchor" id="line-10-4"></span>  &lt;!-- SLAM --&gt;
<span class="anchor" id="line-11-4"></span>  &lt;group ns="rtabmap"&gt;
<span class="anchor" id="line-12-4"></span>    &lt;node name="rtabmap" pkg="rtabmap_slam" type="rtabmap" output="screen" args="--delete_db_on_start"&gt;
<span class="anchor" id="line-13-4"></span>          &lt;param name="frame_id" type="string" value="base_footprint"/&gt;
<span class="anchor" id="line-14-3"></span>
<span class="anchor" id="line-15-3"></span>          &lt;param name="subscribe_depth" type="bool" value="true"/&gt;
<span class="anchor" id="line-16-3"></span>          &lt;param name="subscribe_scan" type="bool" value="true"/&gt;
<span class="anchor" id="line-17-3"></span>
<span class="anchor" id="line-18-2"></span>          &lt;remap from="odom" to="/base_controller/odom"/&gt;
<span class="anchor" id="line-19-2"></span>          &lt;remap from="scan" to="/kinect_scan"/&gt;
<span class="anchor" id="line-20-2"></span>
<span class="anchor" id="line-21-2"></span>          &lt;remap from="rgb/image"       to="/camera/rgb/image_rect_color"/&gt;
<span class="anchor" id="line-22-2"></span>          &lt;remap from="depth/image"     to="/camera/depth_registered/image_raw"/&gt;
<span class="anchor" id="line-23-2"></span>          &lt;remap from="rgb/camera_info" to="/camera/rgb/camera_info"/&gt;
<span class="anchor" id="line-24-2"></span>
<span class="anchor" id="line-25-2"></span>          &lt;param name="queue_size" type="int" value="10"/&gt;
<span class="anchor" id="line-26-2"></span>
<span class="anchor" id="line-27-2"></span>          &lt;!-- RTAB-Map's parameters --&gt;
<span class="anchor" id="line-28-2"></span>          &lt;param name="RGBD/ProximityBySpace"     type="string" value="false"/&gt;
<span class="anchor" id="line-29-2"></span>          &lt;param name="RGBD/AngularUpdate"        type="string" value="0.01"/&gt;
<span class="anchor" id="line-30-2"></span>          &lt;param name="RGBD/LinearUpdate"         type="string" value="0.01"/&gt;
<span class="anchor" id="line-31-2"></span>          &lt;param name="RGBD/OptimizeFromGraphEnd" type="string" value="false"/&gt;
<span class="anchor" id="line-32-2"></span>          &lt;param name="Reg/Force3DoF"             type="string" value="true"/&gt;
<span class="anchor" id="line-33-2"></span>          &lt;param name="Vis/MinInliers"            type="string" value="12"/&gt;
<span class="anchor" id="line-34-2"></span>    &lt;/node&gt;
<span class="anchor" id="line-35-2"></span>  &lt;/group&gt;
<span class="anchor" id="line-36-2"></span>&lt;/launch&gt;</pre><span class="anchor" id="line-236"></span><span class="anchor" id="line-237"></span><p class="line867">
</p><h3 id="Kinect_.2B-_2D_laser">Kinect + 2D laser</h3>
<span class="anchor" id="line-238"></span><span class="anchor" id="line-239"></span><p class="line867"><img alt="Kinect + 2D laser" class="attachment" src="./rtabmap_ros_Tutorials_SetupOnYourRobot - ROS Wiki_files/setupB.png" title="Kinect + 2D laser" width="800"> <span class="anchor" id="line-240"></span><span class="anchor" id="line-241"></span></p><p class="line862">In you don't have odometry, you can create one using the 2D laser scans and ICP. Once you have this new odometry node, you can do the same steps as <a class="http" href="http://wiki.ros.org/rtabmap_ros/Tutorials/SetupOnYourRobot#Kinect_.2B-_Odometry_.2B-_2D_laser">above</a> (with odometry). To generate odometry from laser scans, take a look at these packages: <a href="https://wiki.ros.org/laser_scan_matcher">laser_scan_matcher</a> or <a href="https://wiki.ros.org/hector_slam">hector_slam</a>. <strong>NEW</strong> RTAB-Map has now its own <tt class="backtick">icp_odometry</tt> node. <span class="anchor" id="line-242"></span><span class="anchor" id="line-243"></span></p><p class="line862">Here is an example on how <a href="https://wiki.ros.org/hector_slam">hector_slam</a> can be integrated with <a href="https://wiki.ros.org/rtabmap_slam#rtabmap">rtabmap</a>: <a class="https" href="https://github.com/introlab/rtabmap_ros/blob/master/rtabmap_demos/launch/demo_hector_mapping.launch">demo_hector_mapping.launch</a>. you can try it with this bag: <a class="https" href="https://docs.google.com/uc?id=0B46akLGdg-uadXhLeURiMTBQU28&amp;export=download">demo_mapping.bag</a> (you should remove the "/odom" tf from the bag first) :  <span class="anchor" id="line-244"></span><span class="anchor" id="line-245"></span><span class="anchor" id="line-246"></span><span class="anchor" id="line-247"></span><span class="anchor" id="line-248"></span></p><pre><span class="anchor" id="line-1-15"></span>$ rosbag filter demo_mapping.bag demo_mapping_no_odom.bag 'topic != "/tf" or topic == "/tf" and m.transforms[0].header.frame_id != "/odom"'
<span class="anchor" id="line-2-9"></span>$ roslaunch rtabmap_demos demo_hector_mapping.launch hector:=true
<span class="anchor" id="line-3-7"></span>$ rosbag play --clock demo_mapping_no_odom.bag</pre><span class="anchor" id="line-249"></span><span class="anchor" id="line-250"></span><p class="line862">For an example using <tt class="backtick">rtabmap_odom/icp_odometry</tt>, set <tt class="backtick">hector</tt> argument to false above. For the best results, build rtabmap with <a class="https" href="https://github.com/ethz-asl/libpointmatcher">libpointmatcher</a> dependency. <span class="anchor" id="line-251"></span><span class="anchor" id="line-252"></span></p><p class="line867">
</p><h3 id="A2D_laser_only">2D laser only</h3>
<span class="anchor" id="line-253"></span><span class="anchor" id="line-254"></span><p class="line867"><img alt="2D laser" class="attachment" src="./rtabmap_ros_Tutorials_SetupOnYourRobot - ROS Wiki_files/setupLaserOnly.png" title="2D laser" width="800"> <span class="anchor" id="line-255"></span><span class="anchor" id="line-256"></span></p><p class="line862">This is the same example than <a class="http" href="http://wiki.ros.org/rtabmap_ros/Tutorials/SetupOnYourRobot#Kinect_.2B-_2D_laser">above</a> with Kinect+Laser but without a camera. If you have only a lidar without wheel odometry, you could try this setup. Obviously without a camera, you lose the ability to detect global loop closures or globally localize using vision. If odometry doesn't drift too much, proximity detections can still be detected to correct odometry over time. We will again use <a class="https" href="https://docs.google.com/uc?id=0B46akLGdg-uadXhLeURiMTBQU28&amp;export=download">demo_mapping.bag</a> without wheel odometry and same launch file (<a class="https" href="https://github.com/introlab/rtabmap_ros/blob/master/rtabmap_demos/launch/demo_hector_mapping.launch">demo_hector_mapping.launch</a>) but with argument "camera:=false" to disable camera stuff: <span class="anchor" id="line-257"></span><span class="anchor" id="line-258"></span><span class="anchor" id="line-259"></span><span class="anchor" id="line-260"></span><span class="anchor" id="line-261"></span></p><pre><span class="anchor" id="line-1-16"></span>$ rosbag filter demo_mapping.bag demo_mapping_no_odom.bag 'topic != "/tf" or topic == "/tf" and m.transforms[0].header.frame_id != "/odom"'
<span class="anchor" id="line-2-10"></span>$ roslaunch rtabmap_demos demo_hector_mapping.launch hector:=true camera:=false
<span class="anchor" id="line-3-8"></span>$ rosbag play --clock demo_mapping_no_odom.bag</pre><span class="anchor" id="line-262"></span><p class="line862">For an example using <tt class="backtick">rtabmap_odom/icp_odometry</tt>, set <tt class="backtick">hector</tt> argument to false above. For the best results, build rtabmap with <a class="https" href="https://github.com/ethz-asl/libpointmatcher">libpointmatcher</a> dependency. <span class="anchor" id="line-263"></span><span class="anchor" id="line-264"></span></p><p class="line867">
</p><h3 id="A2D_laser_.2B-_Wheel_Odometry_as_guess">2D laser + Wheel Odometry as guess</h3>
<span class="anchor" id="line-265"></span><span class="anchor" id="line-266"></span><p class="line867"><img alt="2D laser and wheel odometry as guess" class="attachment" src="./rtabmap_ros_Tutorials_SetupOnYourRobot - ROS Wiki_files/setupLaserWheelOdometry.png" title="2D laser and wheel odometry as guess" width="800"> <span class="anchor" id="line-267"></span><span class="anchor" id="line-268"></span></p><p class="line862">This is the same example than <a class="http" href="http://wiki.ros.org/rtabmap_ros/Tutorials/SetupOnYourRobot#A2D_laser_only">above</a> with Laser only but here we use wheel odometry as guess for icp_odometry. This will make icp_odometry more robust to corridor-like environments with short-range lidars. For this example, we will use the orignal <a class="https" href="https://docs.google.com/uc?id=0B46akLGdg-uadXhLeURiMTBQU28&amp;export=download">demo_mapping.bag</a> with wheel odometry. Here we should set "hector:=false" and "odom_guess:=true" with launch file <a class="https" href="https://github.com/introlab/rtabmap_ros/blob/master/rtabmap_demos/launch/demo_hector_mapping.launch">demo_hector_mapping.launch</a>: <span class="anchor" id="line-269"></span><span class="anchor" id="line-270"></span><span class="anchor" id="line-271"></span><span class="anchor" id="line-272"></span></p><pre><span class="anchor" id="line-1-17"></span>$ roslaunch rtabmap_demos demo_hector_mapping.launch hector:=false camera:=false odom_guess:=true
<span class="anchor" id="line-2-11"></span>$ rosbag play --clock demo_mapping.bag</pre><span class="anchor" id="line-273"></span><p class="line874">Obviously without a camera, you lose the ability to detect global loop closures or globally localize using vision. If odometry doesn't drift too much, proximity detections can still be detected to correct odometry over time. The same example can be ran with a camera for comparison by setting "camera:=true". <span class="anchor" id="line-274"></span>For the best results, build rtabmap with <a class="https" href="https://github.com/ethz-asl/libpointmatcher">libpointmatcher</a> dependency. <span class="anchor" id="line-275"></span><span class="anchor" id="line-276"></span></p><p class="line867">
</p><h3 id="Kinect_.2B-_Odometry">Kinect + Odometry</h3>
<span class="anchor" id="line-277"></span><span class="anchor" id="line-278"></span><p class="line867"><img alt="Kinect + Odometry" class="attachment" src="./rtabmap_ros_Tutorials_SetupOnYourRobot - ROS Wiki_files/setupC.png" title="Kinect + Odometry" width="800"> <span class="anchor" id="line-279"></span><span class="anchor" id="line-280"></span></p><p class="line862">In this configuration, I assume that you have a robot not constrained to a single plane (like UAV), which can move in <tt class="backtick">XYZ</tt> and <tt class="backtick">roll</tt>, <tt class="backtick">pitch</tt>, <tt class="backtick">yaw</tt> rotations. <span class="anchor" id="line-281"></span><span class="anchor" id="line-282"></span></p><p class="line867"><span class="anchor" id="line-283"></span><span class="anchor" id="line-284"></span><span class="anchor" id="line-285"></span><span class="anchor" id="line-286"></span><span class="anchor" id="line-287"></span><span class="anchor" id="line-288"></span><span class="anchor" id="line-289"></span><span class="anchor" id="line-290"></span><span class="anchor" id="line-291"></span><span class="anchor" id="line-292"></span><span class="anchor" id="line-293"></span><span class="anchor" id="line-294"></span><span class="anchor" id="line-295"></span><span class="anchor" id="line-296"></span><span class="anchor" id="line-297"></span><span class="anchor" id="line-298"></span><span class="anchor" id="line-299"></span><span class="anchor" id="line-300"></span><span class="anchor" id="line-301"></span><span class="anchor" id="line-302"></span><span class="anchor" id="line-303"></span><span class="anchor" id="line-304"></span><span class="anchor" id="line-305"></span><span class="anchor" id="line-306"></span><span class="anchor" id="line-307"></span><span class="anchor" id="line-308"></span><span class="anchor" id="line-309"></span><span class="anchor" id="line-310"></span><span class="anchor" id="line-311"></span><span class="anchor" id="line-312"></span><span class="anchor" id="line-313"></span><span class="anchor" id="line-314"></span><span class="anchor" id="line-315"></span><span class="anchor" id="line-316"></span></p><pre><span class="anchor" id="line-1-18"></span>&lt;launch&gt;
<span class="anchor" id="line-2-12"></span>  &lt;group ns="rtabmap"&gt;
<span class="anchor" id="line-3-9"></span>
<span class="anchor" id="line-4-6"></span>    &lt;node pkg="nodelet" type="nodelet" name="rgbd_sync" args="standalone rtabmap_sync/rgbd_sync" output="screen"&gt;
<span class="anchor" id="line-5-6"></span>      &lt;remap from="rgb/image"       to="/camera/rgb/image_rect_color"/&gt;
<span class="anchor" id="line-6-6"></span>      &lt;remap from="depth/image"     to="/camera/depth_registered/image_raw"/&gt;
<span class="anchor" id="line-7-6"></span>      &lt;remap from="rgb/camera_info" to="/camera/rgb/camera_info"/&gt;
<span class="anchor" id="line-8-6"></span>      &lt;remap from="rgbd_image"      to="rgbd_image"/&gt; &lt;!-- output --&gt;
<span class="anchor" id="line-9-5"></span>      
<span class="anchor" id="line-10-5"></span>      &lt;!-- Should be true for not synchronized camera topics 
<span class="anchor" id="line-11-5"></span>           (e.g., false for kinectv2, zed, realsense, true for xtion, kinect360)--&gt;
<span class="anchor" id="line-12-5"></span>      &lt;param name="approx_sync"       value="true"/&gt; 
<span class="anchor" id="line-13-5"></span>    &lt;/node&gt;
<span class="anchor" id="line-14-4"></span>
<span class="anchor" id="line-15-4"></span>    &lt;node name="rtabmap" pkg="rtabmap_slam" type="rtabmap" output="screen" args="--delete_db_on_start"&gt;
<span class="anchor" id="line-16-4"></span>          &lt;param name="frame_id" type="string" value="base_link"/&gt;
<span class="anchor" id="line-17-4"></span>
<span class="anchor" id="line-18-3"></span>          &lt;param name="subscribe_depth" type="bool" value="false"/&gt;
<span class="anchor" id="line-19-3"></span>          &lt;param name="subscribe_rgbd" type="bool" value="true"/&gt;
<span class="anchor" id="line-20-3"></span>
<span class="anchor" id="line-21-3"></span>          &lt;remap from="odom" to="/base_controller/odom"/&gt;
<span class="anchor" id="line-22-3"></span>
<span class="anchor" id="line-23-3"></span>          &lt;remap from="rgbd_image" to="rgbd_image"/&gt;
<span class="anchor" id="line-24-3"></span>
<span class="anchor" id="line-25-3"></span>          &lt;param name="queue_size" type="int" value="10"/&gt;
<span class="anchor" id="line-26-3"></span>
<span class="anchor" id="line-27-3"></span>          &lt;!-- RTAB-Map's parameters --&gt;
<span class="anchor" id="line-28-3"></span>          &lt;param name="RGBD/AngularUpdate"        type="string" value="0.01"/&gt;
<span class="anchor" id="line-29-3"></span>          &lt;param name="RGBD/LinearUpdate"         type="string" value="0.01"/&gt;
<span class="anchor" id="line-30-3"></span>          &lt;param name="RGBD/OptimizeFromGraphEnd" type="string" value="false"/&gt;
<span class="anchor" id="line-31-3"></span>    &lt;/node&gt;
<span class="anchor" id="line-32-3"></span>  &lt;/group&gt;
<span class="anchor" id="line-33-3"></span>&lt;/launch&gt;</pre><span class="anchor" id="line-317"></span><span class="anchor" id="line-318"></span><p class="line867">
</p><h3 id="Kinect">Kinect</h3>
<span class="anchor" id="line-319"></span><span class="anchor" id="line-320"></span><p class="line867"><img alt="Kinect" class="attachment" src="./rtabmap_ros_Tutorials_SetupOnYourRobot - ROS Wiki_files/setupD.png" title="Kinect" width="800"> <span class="anchor" id="line-321"></span><span class="anchor" id="line-322"></span></p><p class="line862">If you can't have a reliable odometry, you can map using only RTAB-Map at the cost of "lost odometry" (like the <a class="https" href="https://github.com/introlab/rtabmap/wiki/Kinect-mapping#lostodometry">RED screens in the standalone version</a>). The robot may detect this "lost" state when a <strong>null</strong> odometry message is sent by the <a href="https://wiki.ros.org/rtabmap_odom#rgbd_odometry">rgbd_odometry</a> node. <span class="anchor" id="line-323"></span><span class="anchor" id="line-324"></span></p><p class="line867"><span class="anchor" id="line-325"></span><span class="anchor" id="line-326"></span><span class="anchor" id="line-327"></span><span class="anchor" id="line-328"></span><span class="anchor" id="line-329"></span><span class="anchor" id="line-330"></span><span class="anchor" id="line-331"></span><span class="anchor" id="line-332"></span><span class="anchor" id="line-333"></span><span class="anchor" id="line-334"></span><span class="anchor" id="line-335"></span><span class="anchor" id="line-336"></span><span class="anchor" id="line-337"></span><span class="anchor" id="line-338"></span><span class="anchor" id="line-339"></span><span class="anchor" id="line-340"></span><span class="anchor" id="line-341"></span><span class="anchor" id="line-342"></span><span class="anchor" id="line-343"></span><span class="anchor" id="line-344"></span><span class="anchor" id="line-345"></span><span class="anchor" id="line-346"></span><span class="anchor" id="line-347"></span><span class="anchor" id="line-348"></span><span class="anchor" id="line-349"></span><span class="anchor" id="line-350"></span><span class="anchor" id="line-351"></span><span class="anchor" id="line-352"></span><span class="anchor" id="line-353"></span><span class="anchor" id="line-354"></span><span class="anchor" id="line-355"></span><span class="anchor" id="line-356"></span><span class="anchor" id="line-357"></span><span class="anchor" id="line-358"></span><span class="anchor" id="line-359"></span><span class="anchor" id="line-360"></span><span class="anchor" id="line-361"></span><span class="anchor" id="line-362"></span><span class="anchor" id="line-363"></span><span class="anchor" id="line-364"></span><span class="anchor" id="line-365"></span></p><pre><span class="anchor" id="line-1-19"></span>&lt;launch&gt;
<span class="anchor" id="line-2-13"></span>  &lt;group ns="rtabmap"&gt;
<span class="anchor" id="line-3-10"></span>
<span class="anchor" id="line-4-7"></span>    &lt;node pkg="nodelet" type="nodelet" name="rgbd_sync" args="standalone rtabmap_sync/rgbd_sync" output="screen"&gt;
<span class="anchor" id="line-5-7"></span>      &lt;remap from="rgb/image"        to="/camera/rgb/image_rect_color"/&gt;
<span class="anchor" id="line-6-7"></span>      &lt;remap from="depth/image"      to="/camera/depth_registered/image_raw"/&gt;
<span class="anchor" id="line-7-7"></span>      &lt;remap from="rgb/camera_info"  to="/camera/rgb/camera_info"/&gt;
<span class="anchor" id="line-8-7"></span>      &lt;remap from="rgbd_image"       to="rgbd_image"/&gt; &lt;!-- output --&gt;
<span class="anchor" id="line-9-6"></span>      
<span class="anchor" id="line-10-6"></span>      &lt;!-- Should be true for not synchronized camera topics 
<span class="anchor" id="line-11-6"></span>           (e.g., false for kinectv2, zed, realsense, true for xtion, kinect360)--&gt;
<span class="anchor" id="line-12-6"></span>      &lt;param name="approx_sync"       value="true"/&gt; 
<span class="anchor" id="line-13-6"></span>    &lt;/node&gt;
<span class="anchor" id="line-14-5"></span>
<span class="anchor" id="line-15-5"></span>    &lt;!-- Odometry --&gt;
<span class="anchor" id="line-16-5"></span>    &lt;node pkg="rtabmap_odom" type="rgbd_odometry" name="rgbd_odometry" output="screen"&gt;
<span class="anchor" id="line-17-5"></span>      &lt;param name="subscribe_rgbd" type="bool"   value="true"/&gt;
<span class="anchor" id="line-18-4"></span>      &lt;param name="frame_id"       type="string" value="base_link"/&gt;
<span class="anchor" id="line-19-4"></span>      &lt;remap from="rgbd_image" to="rgbd_image"/&gt;
<span class="anchor" id="line-20-4"></span>    &lt;/node&gt;
<span class="anchor" id="line-21-4"></span>
<span class="anchor" id="line-22-4"></span>    &lt;node name="rtabmap" pkg="rtabmap_slam" type="rtabmap" output="screen" args="--delete_db_on_start"&gt;
<span class="anchor" id="line-23-4"></span>          &lt;param name="frame_id"        type="string" value="base_link"/&gt;
<span class="anchor" id="line-24-4"></span>          &lt;param name="subscribe_depth" type="bool"   value="false"/&gt;
<span class="anchor" id="line-25-4"></span>          &lt;param name="subscribe_rgbd"  type="bool"   value="true"/&gt;
<span class="anchor" id="line-26-4"></span>
<span class="anchor" id="line-27-4"></span>          &lt;remap from="odom"       to="odom"/&gt;
<span class="anchor" id="line-28-4"></span>          &lt;remap from="rgbd_image" to="rgbd_image"/&gt;
<span class="anchor" id="line-29-4"></span>
<span class="anchor" id="line-30-4"></span>          &lt;param name="queue_size"  type="int"  value="10"/&gt;
<span class="anchor" id="line-31-4"></span>          &lt;param name="approx_sync" type="bool" value="false"/&gt;
<span class="anchor" id="line-32-4"></span>
<span class="anchor" id="line-33-4"></span>          &lt;!-- RTAB-Map's parameters --&gt;
<span class="anchor" id="line-34-3"></span>          &lt;param name="RGBD/AngularUpdate"        type="string" value="0.01"/&gt;
<span class="anchor" id="line-35-3"></span>          &lt;param name="RGBD/LinearUpdate"         type="string" value="0.01"/&gt;
<span class="anchor" id="line-36-3"></span>          &lt;param name="RGBD/OptimizeFromGraphEnd" type="string" value="false"/&gt;
<span class="anchor" id="line-37-2"></span>    &lt;/node&gt;
<span class="anchor" id="line-38-2"></span>  &lt;/group&gt;
<span class="anchor" id="line-39-2"></span>&lt;/launch&gt;
<span class="anchor" id="line-40-2"></span>Note that we set `approx_sync` to false for `rtabmap` node to make sure it uses exactly the `odom` computed with the same `rgbd_image` topic.</pre><span class="anchor" id="line-366"></span><span class="anchor" id="line-367"></span><p class="line867">
</p><h3 id="Stereo_A">Stereo A</h3>
<span class="anchor" id="line-368"></span><span class="anchor" id="line-369"></span><p class="line867"><img alt="Stereo A" class="attachment" src="./rtabmap_ros_Tutorials_SetupOnYourRobot - ROS Wiki_files/setupE.png" title="Stereo A" width="800"> <span class="anchor" id="line-370"></span><span class="anchor" id="line-371"></span></p><p class="line862">RTAB-Map can be also used with a stereo camera. As shown in the picture above, you will need to install <a href="https://wiki.ros.org/viso2_ros">viso2_ros</a> and the <a href="https://wiki.ros.org/stereo_image_proc">stereo_image_proc</a> nodes. <span class="anchor" id="line-372"></span><span class="anchor" id="line-373"></span></p><p class="line867"><span class="anchor" id="line-374"></span><span class="anchor" id="line-375"></span><span class="anchor" id="line-376"></span><span class="anchor" id="line-377"></span><span class="anchor" id="line-378"></span><span class="anchor" id="line-379"></span><span class="anchor" id="line-380"></span><span class="anchor" id="line-381"></span><span class="anchor" id="line-382"></span><span class="anchor" id="line-383"></span><span class="anchor" id="line-384"></span><span class="anchor" id="line-385"></span><span class="anchor" id="line-386"></span><span class="anchor" id="line-387"></span><span class="anchor" id="line-388"></span><span class="anchor" id="line-389"></span><span class="anchor" id="line-390"></span><span class="anchor" id="line-391"></span><span class="anchor" id="line-392"></span><span class="anchor" id="line-393"></span><span class="anchor" id="line-394"></span><span class="anchor" id="line-395"></span><span class="anchor" id="line-396"></span><span class="anchor" id="line-397"></span><span class="anchor" id="line-398"></span><span class="anchor" id="line-399"></span><span class="anchor" id="line-400"></span><span class="anchor" id="line-401"></span><span class="anchor" id="line-402"></span><span class="anchor" id="line-403"></span><span class="anchor" id="line-404"></span><span class="anchor" id="line-405"></span><span class="anchor" id="line-406"></span><span class="anchor" id="line-407"></span><span class="anchor" id="line-408"></span><span class="anchor" id="line-409"></span><span class="anchor" id="line-410"></span><span class="anchor" id="line-411"></span><span class="anchor" id="line-412"></span><span class="anchor" id="line-413"></span></p><pre><span class="anchor" id="line-1-20"></span>&lt;launch&gt;
<span class="anchor" id="line-2-14"></span>  &lt;!-- Run the ROS package stereo_image_proc for image rectification and disparity computation --&gt;
<span class="anchor" id="line-3-11"></span>  &lt;group ns="stereo"&gt;
<span class="anchor" id="line-4-8"></span>    &lt;node pkg="stereo_image_proc" type="stereo_image_proc" name="stereo_image_proc"/&gt;
<span class="anchor" id="line-5-8"></span>
<span class="anchor" id="line-6-8"></span>    &lt;!-- Disparity to depth --&gt;
<span class="anchor" id="line-7-8"></span>    &lt;node pkg="nodelet" type="nodelet" name="disparity2depth" args="standalone rtabmap_util/disparity_to_depth"/&gt;
<span class="anchor" id="line-8-8"></span>  &lt;/group&gt;
<span class="anchor" id="line-9-7"></span>
<span class="anchor" id="line-10-7"></span>  &lt;!-- Odometry: Run the viso2_ros package --&gt;
<span class="anchor" id="line-11-7"></span>  &lt;node pkg="viso2_ros" type="stereo_odometer" name="stereo_odometer" output="screen"&gt;
<span class="anchor" id="line-12-7"></span>    &lt;remap from="stereo" to="stereo"/&gt;
<span class="anchor" id="line-13-7"></span>    &lt;remap from="image"  to="image_rect"/&gt;
<span class="anchor" id="line-14-6"></span>    &lt;param name="base_link_frame_id"      value="/base_link"/&gt;
<span class="anchor" id="line-15-6"></span>    &lt;param name="odom_frame_id"           value="/odom"/&gt;
<span class="anchor" id="line-16-6"></span>    &lt;param name="ref_frame_change_method" value="1"/&gt;
<span class="anchor" id="line-17-6"></span>  &lt;/node&gt;
<span class="anchor" id="line-18-5"></span>
<span class="anchor" id="line-19-5"></span>  &lt;group ns="rtabmap"&gt;
<span class="anchor" id="line-20-5"></span>    &lt;!-- Visual SLAM --&gt;
<span class="anchor" id="line-21-5"></span>    &lt;node name="rtabmap" pkg="rtabmap_slam" type="rtabmap" output="screen" args="--delete_db_on_start"&gt;
<span class="anchor" id="line-22-5"></span>      &lt;param name="subscribe_depth"     type="bool" value="true"/&gt;
<span class="anchor" id="line-23-5"></span>      &lt;param name="subscribe_laserScan" type="bool" value="false"/&gt;
<span class="anchor" id="line-24-5"></span>
<span class="anchor" id="line-25-5"></span>      &lt;remap from="rgb/image"       to="/stereo/left/image_rect"/&gt;
<span class="anchor" id="line-26-5"></span>      &lt;remap from="rgb/camera_info" to="/stereo/left/camera_info"/&gt;
<span class="anchor" id="line-27-5"></span>      &lt;remap from="depth/image"     to="/stereo/depth"/&gt;
<span class="anchor" id="line-28-5"></span>
<span class="anchor" id="line-29-5"></span>      &lt;remap from="odom" to="/stereo_odometer/odometry"/&gt;
<span class="anchor" id="line-30-5"></span>
<span class="anchor" id="line-31-5"></span>      &lt;param name="frame_id"    type="string" value="/base_link"/&gt;
<span class="anchor" id="line-32-5"></span>      &lt;param name="queue_size"  type="int"    value="30"/&gt;
<span class="anchor" id="line-33-5"></span>      &lt;param name="approx_sync" type="bool"   value="false"/&gt;
<span class="anchor" id="line-34-4"></span>
<span class="anchor" id="line-35-4"></span>      &lt;param name="Vis/MinInliers" type="string" value="12"/&gt;
<span class="anchor" id="line-36-4"></span>    &lt;/node&gt;
<span class="anchor" id="line-37-3"></span>  &lt;/group&gt;
<span class="anchor" id="line-38-3"></span>&lt;/launch&gt;
<span class="anchor" id="line-39-3"></span>Note that we set `approx_sync` to false for `rtabmap` node to make sure it uses exactly the `odom` computed with the same image topics.</pre><span class="anchor" id="line-414"></span><span class="anchor" id="line-415"></span><p class="line867">
</p><h3 id="Stereo_B">Stereo B</h3>
<span class="anchor" id="line-416"></span><span class="anchor" id="line-417"></span><p class="line867"><img alt="Stereo B" class="attachment" src="./rtabmap_ros_Tutorials_SetupOnYourRobot - ROS Wiki_files/setupE2.png" title="Stereo B" width="800"> <span class="anchor" id="line-418"></span><span class="anchor" id="line-419"></span></p><p class="line862">The page <a href="https://wiki.ros.org/rtabmap_ros/Tutorials/StereoOutdoorMapping">StereoOutdoorMapping</a> shows a working demonstration that you can try with the provided rosbag. For actual mapping with your stereo camera, you camera driver should publish image messages like these (the camera namespace can be different than <tt class="backtick">stereo_camera</tt>): <span class="anchor" id="line-420"></span><span class="anchor" id="line-421"></span><span class="anchor" id="line-422"></span><span class="anchor" id="line-423"></span><span class="anchor" id="line-424"></span><span class="anchor" id="line-425"></span><span class="anchor" id="line-426"></span></p><pre><span class="anchor" id="line-1-21"></span>$ rostopic list
<span class="anchor" id="line-2-15"></span>/stereo_camera/left/image_raw
<span class="anchor" id="line-3-12"></span>/stereo_camera/left/camera_info
<span class="anchor" id="line-4-9"></span>/stereo_camera/right/image_raw
<span class="anchor" id="line-5-9"></span>/stereo_camera/right/camera_info</pre><span class="anchor" id="line-427"></span><p class="line862">and assuming that the camera driver provides TF <tt class="backtick">stereo_camera</tt> and that left and right images are synchronized (note the <tt class="backtick">approx_sync</tt> set to false), the corresponding launch file could be like this: <span class="anchor" id="line-428"></span><span class="anchor" id="line-429"></span><span class="anchor" id="line-430"></span><span class="anchor" id="line-431"></span><span class="anchor" id="line-432"></span><span class="anchor" id="line-433"></span><span class="anchor" id="line-434"></span><span class="anchor" id="line-435"></span><span class="anchor" id="line-436"></span><span class="anchor" id="line-437"></span><span class="anchor" id="line-438"></span><span class="anchor" id="line-439"></span><span class="anchor" id="line-440"></span><span class="anchor" id="line-441"></span><span class="anchor" id="line-442"></span><span class="anchor" id="line-443"></span><span class="anchor" id="line-444"></span><span class="anchor" id="line-445"></span><span class="anchor" id="line-446"></span><span class="anchor" id="line-447"></span><span class="anchor" id="line-448"></span><span class="anchor" id="line-449"></span><span class="anchor" id="line-450"></span><span class="anchor" id="line-451"></span><span class="anchor" id="line-452"></span><span class="anchor" id="line-453"></span><span class="anchor" id="line-454"></span><span class="anchor" id="line-455"></span><span class="anchor" id="line-456"></span><span class="anchor" id="line-457"></span><span class="anchor" id="line-458"></span><span class="anchor" id="line-459"></span><span class="anchor" id="line-460"></span><span class="anchor" id="line-461"></span><span class="anchor" id="line-462"></span><span class="anchor" id="line-463"></span><span class="anchor" id="line-464"></span><span class="anchor" id="line-465"></span><span class="anchor" id="line-466"></span><span class="anchor" id="line-467"></span><span class="anchor" id="line-468"></span><span class="anchor" id="line-469"></span><span class="anchor" id="line-470"></span><span class="anchor" id="line-471"></span><span class="anchor" id="line-472"></span><span class="anchor" id="line-473"></span><span class="anchor" id="line-474"></span><span class="anchor" id="line-475"></span><span class="anchor" id="line-476"></span><span class="anchor" id="line-477"></span></p><pre><span class="anchor" id="line-1-22"></span>&lt;launch&gt;
<span class="anchor" id="line-2-16"></span>&lt;arg name="pi/2" value="1.5707963267948966" /&gt;
<span class="anchor" id="line-3-13"></span>&lt;arg name="optical_rotate" value="0 0 0 -$(arg pi/2) 0 -$(arg pi/2)" /&gt;
<span class="anchor" id="line-4-10"></span>&lt;node pkg="tf" type="static_transform_publisher" name="camera_base_link"
<span class="anchor" id="line-5-10"></span>     args="$(arg optical_rotate) base_link stereo_camera 100" /&gt;  
<span class="anchor" id="line-6-9"></span>
<span class="anchor" id="line-7-9"></span>&lt;!-- Run the ROS package stereo_image_proc --&gt;
<span class="anchor" id="line-8-9"></span>&lt;group ns="/stereo_camera" &gt;
<span class="anchor" id="line-9-8"></span>    &lt;node pkg="stereo_image_proc" type="stereo_image_proc" name="stereo_image_proc"/&gt;
<span class="anchor" id="line-10-8"></span>
<span class="anchor" id="line-11-8"></span>    &lt;!-- Odometry --&gt;
<span class="anchor" id="line-12-8"></span>    &lt;node pkg="rtabmap_odom" type="stereo_odometry" name="stereo_odometry" output="screen"&gt;
<span class="anchor" id="line-13-8"></span>        &lt;remap from="left/image_rect"       to="left/image_rect"/&gt;
<span class="anchor" id="line-14-7"></span>        &lt;remap from="right/image_rect"      to="right/image_rect"/&gt;
<span class="anchor" id="line-15-7"></span>        &lt;remap from="left/camera_info"      to="left/camera_info"/&gt;
<span class="anchor" id="line-16-7"></span>        &lt;remap from="right/camera_info"     to="right/camera_info"/&gt;
<span class="anchor" id="line-17-7"></span>
<span class="anchor" id="line-18-6"></span>        &lt;param name="frame_id" type="string" value="base_link"/&gt;
<span class="anchor" id="line-19-6"></span>        &lt;param name="odom_frame_id" type="string" value="odom"/&gt;
<span class="anchor" id="line-20-6"></span>        &lt;param name="approx_sync"   type="bool" value="false"/&gt;
<span class="anchor" id="line-21-6"></span>        &lt;param name="queue_size"    type="int" value="5"/&gt;
<span class="anchor" id="line-22-6"></span>
<span class="anchor" id="line-23-6"></span>        &lt;param name="Odom/MinInliers" type="string" value="12"/&gt;
<span class="anchor" id="line-24-6"></span>        &lt;param name="Odom/RoiRatios"  type="string" value="0.03 0.03 0.04 0.04"/&gt;
<span class="anchor" id="line-25-6"></span>    &lt;/node&gt;     
<span class="anchor" id="line-26-6"></span>&lt;/group&gt;
<span class="anchor" id="line-27-6"></span>
<span class="anchor" id="line-28-6"></span>&lt;group ns="rtabmap"&gt;   
<span class="anchor" id="line-29-6"></span>  &lt;node name="rtabmap" pkg="rtabmap_slam" type="rtabmap" output="screen" args="--delete_db_on_start"&gt;
<span class="anchor" id="line-30-6"></span>     &lt;param name="frame_id" type="string" value="base_link"/&gt;
<span class="anchor" id="line-31-6"></span>     &lt;param name="subscribe_stereo" type="bool" value="true"/&gt;
<span class="anchor" id="line-32-6"></span>     &lt;param name="subscribe_depth"  type="bool" value="false"/&gt;
<span class="anchor" id="line-33-6"></span>     &lt;param name="approx_sync"      type="bool" value="false"/&gt;
<span class="anchor" id="line-34-5"></span>
<span class="anchor" id="line-35-5"></span>     &lt;remap from="left/image_rect"   to="/stereo_camera/left/image_rect_color"/&gt;
<span class="anchor" id="line-36-5"></span>     &lt;remap from="right/image_rect"  to="/stereo_camera/right/image_rect"/&gt;
<span class="anchor" id="line-37-4"></span>     &lt;remap from="left/camera_info"  to="/stereo_camera/left/camera_info"/&gt;
<span class="anchor" id="line-38-4"></span>     &lt;remap from="right/camera_info" to="/stereo_camera/right/camera_info"/&gt;
<span class="anchor" id="line-39-4"></span>
<span class="anchor" id="line-40-3"></span>     &lt;remap from="odom" to="/stereo_camera/odom"/&gt;
<span class="anchor" id="line-41-2"></span>
<span class="anchor" id="line-42-2"></span>     &lt;param name="queue_size" type="int" value="30"/&gt;
<span class="anchor" id="line-43-2"></span>
<span class="anchor" id="line-44-2"></span>     &lt;!-- RTAB-Map's parameters --&gt;
<span class="anchor" id="line-45-2"></span>     &lt;param name="Vis/MinInliers" type="string" value="12"/&gt;
<span class="anchor" id="line-46-2"></span>  &lt;/node&gt;
<span class="anchor" id="line-47-2"></span> &lt;/group&gt;
<span class="anchor" id="line-48-1"></span>&lt;/launch&gt;</pre><span class="anchor" id="line-478"></span><p class="line862">For visualization, I recommend to try the <a href="https://wiki.ros.org/rtabmap_ros/Tutorials/StereoOutdoorMapping">stereo outdoor mapping</a> tutorial to see what is going on with <a href="https://wiki.ros.org/rviz">rviz</a>. To use <a href="https://wiki.ros.org/rtabmap_viz#rtabmap_viz">rtabmap_viz</a>, you can add the node under <tt class="backtick">rtabmap</tt> namespace above: <span class="anchor" id="line-479"></span><span class="anchor" id="line-480"></span></p><p class="line867"><span class="anchor" id="line-481"></span><span class="anchor" id="line-482"></span><span class="anchor" id="line-483"></span><span class="anchor" id="line-484"></span><span class="anchor" id="line-485"></span><span class="anchor" id="line-486"></span><span class="anchor" id="line-487"></span><span class="anchor" id="line-488"></span><span class="anchor" id="line-489"></span><span class="anchor" id="line-490"></span><span class="anchor" id="line-491"></span><span class="anchor" id="line-492"></span><span class="anchor" id="line-493"></span><span class="anchor" id="line-494"></span><span class="anchor" id="line-495"></span><span class="anchor" id="line-496"></span></p><pre><span class="anchor" id="line-1-23"></span>&lt;group ns="rtabmap"&gt;  
<span class="anchor" id="line-2-17"></span>  &lt;!-- Visualisation RTAB-Map --&gt;
<span class="anchor" id="line-3-14"></span>  &lt;node pkg="rtabmap_viz" type="rtabmap_viz" name="rtabmap_viz" args="-d $(find rtabmap_viz)/launch/config/rgbd_gui.ini" output="screen"&gt;
<span class="anchor" id="line-4-11"></span>     &lt;param name="subscribe_stereo"    type="bool"   value="true"/&gt;
<span class="anchor" id="line-5-11"></span>     &lt;param name="subscribe_odom_info" type="bool"   value="true"/&gt;
<span class="anchor" id="line-6-10"></span>     &lt;param name="queue_size"          type="int"    value="10"/&gt;
<span class="anchor" id="line-7-10"></span>     &lt;param name="frame_id"            type="string" value="base_link"/&gt;
<span class="anchor" id="line-8-10"></span>     &lt;remap from="left/image_rect"   to="/stereo_camera/left/image_rect_color"/&gt;
<span class="anchor" id="line-9-9"></span>     &lt;remap from="right/image_rect"  to="/stereo_camera/right/image_rect"/&gt;
<span class="anchor" id="line-10-9"></span>     &lt;remap from="left/camera_info"  to="/stereo_camera/left/camera_info"/&gt;
<span class="anchor" id="line-11-9"></span>     &lt;remap from="right/camera_info" to="/stereo_camera/right/camera_info"/&gt;
<span class="anchor" id="line-12-9"></span>     &lt;remap from="odom_info"         to="/stereo_camera/odom_info"/&gt;
<span class="anchor" id="line-13-9"></span>     &lt;remap from="odom"              to="/stereo_camera/odom"/&gt;
<span class="anchor" id="line-14-8"></span>  &lt;/node&gt;
<span class="anchor" id="line-15-8"></span>&lt;/group&gt;</pre><span class="anchor" id="line-497"></span><span class="anchor" id="line-498"></span><p class="line867">
</p><h2 id="Navigation">Navigation</h2>
<span class="anchor" id="line-499"></span><span class="anchor" id="line-500"></span><p class="line862">The <a href="https://wiki.ros.org/rtabmap_slam#rtabmap">rtabmap</a> node uses the laser scans to create a 2D occupancy grid map that can be used by a planner (see <tt class="backtick">grid_map</tt> topic). If you don't have laser scans, you can create with <a href="https://wiki.ros.org/rtabmap_slam#rtabmap">rtabmap</a> node with <tt class="backtick">proj_map</tt> topic a 2D occupancy grid map from the projection of the Kinect or Stereo point clouds on the ground. Visit the <a href="https://wiki.ros.org/rtabmap_ros/Tutorials/StereoOutdoorNavigation">StereoOutdoorNavigation</a> page for an example of creating such maps. <span class="anchor" id="line-501"></span><span class="anchor" id="line-502"></span></p><p class="line867">
</p><h2 id="Remote_visualization">Remote visualization</h2>
<span class="anchor" id="line-503"></span><span class="anchor" id="line-504"></span><p class="line867">
</p><h3 id="rtabmap_viz">rtabmap_viz</h3>
<span class="anchor" id="line-505"></span><p class="line874">To make rtabmap_viz easily communicate with rtabmap node, launch it in the same namespace than rtabmap, so that all topics and services can be directly connected without remappings. <span class="anchor" id="line-506"></span><span class="anchor" id="line-507"></span><span class="anchor" id="line-508"></span><span class="anchor" id="line-509"></span></p><pre><span class="anchor" id="line-1-24"></span>$ export ROS_NAMESPACE=rtabmap
<span class="anchor" id="line-2-18"></span>$ rosrun rtabmap_viz rtabmap_viz _frame_id:=base_link</pre><span class="anchor" id="line-510"></span><p class="line867">
</p><h3 id="rviz">rviz</h3>
<span class="anchor" id="line-511"></span><p class="line862">When RTAB-Map's ros-pkg is built, the <a href="https://wiki.ros.org/rtabmap_rviz_plugins#Map_Cloud_Display">rtabmap_rviz_plugins/MapCloud</a> plugin can be selected in RVIZ for visualization of the constructed 3D map cloud. <span class="anchor" id="line-512"></span><span class="anchor" id="line-513"></span><span class="anchor" id="line-514"></span></p><pre><span class="anchor" id="line-1-25"></span>$ rosrun rviz rviz</pre><span class="anchor" id="line-515"></span><span class="anchor" id="line-516"></span><p class="line867">
</p><h2 id="Remote_visualization:_bandwidth_efficiency_with_RVIZ">Remote visualization: bandwidth efficiency with RVIZ</h2>
<span class="anchor" id="line-517"></span><span class="anchor" id="line-518"></span><p class="line867">
</p><h3 id="rviz-1">rviz</h3>
<span class="anchor" id="line-519"></span><span class="anchor" id="line-520"></span><p class="line867"><img alt="rviz" class="attachment" src="./rtabmap_ros_Tutorials_SetupOnYourRobot - ROS Wiki_files/SetupOnYourRobot" title="rviz" width="800"> <span class="anchor" id="line-521"></span><span class="anchor" id="line-522"></span></p><p class="line874">Use the following for rviz: <span class="anchor" id="line-523"></span><span class="anchor" id="line-524"></span><span class="anchor" id="line-525"></span><span class="anchor" id="line-526"></span><span class="anchor" id="line-527"></span><span class="anchor" id="line-528"></span><span class="anchor" id="line-529"></span><span class="anchor" id="line-530"></span><span class="anchor" id="line-531"></span><span class="anchor" id="line-532"></span><span class="anchor" id="line-533"></span><span class="anchor" id="line-534"></span><span class="anchor" id="line-535"></span><span class="anchor" id="line-536"></span></p><pre><span class="anchor" id="line-1-26"></span>&lt;launch&gt;
<span class="anchor" id="line-2-19"></span>  &lt;node pkg="rviz" type="rviz" name="rviz"/&gt;
<span class="anchor" id="line-3-15"></span>
<span class="anchor" id="line-4-12"></span>  &lt;!-- Construct and voxelize the point cloud (for fast visualization in rviz) --&gt;
<span class="anchor" id="line-5-12"></span>  &lt;node pkg="nodelet" type="nodelet" name="points_xyzrgb" args="standalone rtabmap_util/point_cloud_xyzrgb"&gt;
<span class="anchor" id="line-6-11"></span>    &lt;remap from="rgbd_image"      to="/rtabmap/rgbd_image/compressed"/&gt;
<span class="anchor" id="line-7-11"></span>    &lt;remap from="cloud"           to="voxel_cloud" /&gt;
<span class="anchor" id="line-8-11"></span>
<span class="anchor" id="line-9-10"></span>    &lt;param name="queue_size" type="int" value="10"/&gt;
<span class="anchor" id="line-10-10"></span>    &lt;param name="voxel_size" type="double" value="0.01"/&gt;
<span class="anchor" id="line-11-10"></span>  &lt;/node&gt;
<span class="anchor" id="line-12-10"></span>&lt;/launch&gt;</pre><span class="anchor" id="line-537"></span><span class="anchor" id="line-538"></span><p class="line867"><a href="https://wiki.ros.org/rtabmap_util#point_cloud_xyzrgb">rtabmap_util/point_cloud_xyzrgb</a> nodelet creates a point cloud from the RGB and depth images, with optional voxel size (0=disabled). <span class="anchor" id="line-539"></span><span class="anchor" id="line-540"></span></p><p class="line867">
</p><h2 id="Remote_mapping">Remote mapping</h2>
<span class="anchor" id="line-541"></span><span class="anchor" id="line-542"></span><p class="line867"><img alt="Remote mapping" class="attachment" src="./rtabmap_ros_Tutorials_SetupOnYourRobot - ROS Wiki_files/SetupOnYourRobot(1)" title="Remote mapping" width="800"> <span class="anchor" id="line-543"></span><span class="anchor" id="line-544"></span></p><p class="line867"><strong>EDIT</strong> (February 4 2016): There is now a simple tutorial about remote mapping with a Kinect here: <a class="http" href="http://wiki.ros.org/rtabmap_ros/Tutorials/RemoteMapping">http://wiki.ros.org/rtabmap_ros/Tutorials/RemoteMapping</a> <span class="anchor" id="line-545"></span><span class="anchor" id="line-546"></span></p><p class="line867">
</p><h2 id="Switching_between_Mapping_and_Localization">Switching between Mapping and Localization</h2>
<span class="anchor" id="line-547"></span><p class="line862">It can be convenient after mapping an area to put rtabmap in localization mode to avoid increasing the map size in already mapped areas. If you are using <a href="https://wiki.ros.org/rtabmap_viz#rtabmap_viz">rtabmap_viz</a>, there are already buttons on the interface: <span class="anchor" id="line-548"></span><span class="anchor" id="line-549"></span></p><p class="line867"><img alt="mapping_localization_buttons" class="attachment" src="./rtabmap_ros_Tutorials_SetupOnYourRobot - ROS Wiki_files/SetupOnYourRobot(2)" title="mapping_localization_buttons"> <span class="anchor" id="line-550"></span><span class="anchor" id="line-551"></span></p><p class="line862">Otherwise, you can call the <a href="https://wiki.ros.org/rtabmap_slam#rtabmap">set_mode_mapping</a> and <a href="https://wiki.ros.org/rtabmap_slam#rtabmap">set_mode_localization</a> services. <span class="anchor" id="line-552"></span><span class="anchor" id="line-553"></span><span class="anchor" id="line-554"></span><span class="anchor" id="line-555"></span></p><pre><span class="anchor" id="line-1-27"></span> $ rosservice call rtabmap/set_mode_localization
<span class="anchor" id="line-2-20"></span> $ rosservice call rtabmap/set_mode_mapping</pre><span class="anchor" id="line-556"></span><span class="anchor" id="bottom"></span></div></div>
<div id="pagebottom"></div>
</div>

<p id="pageinfo" class="info" lang="en" dir="ltr">Wiki: rtabmap_ros/Tutorials/SetupOnYourRobot  (last edited 2023-04-19 05:20:24 by <span title="MathieuLabbe @ 2601:646:ca82:28b0:178f:b067:be17:c3d5[2601:646:ca82:28b0:178f:b067:be17:c3d5]"><a class="nonexistent" href="https://wiki.ros.org/MathieuLabbe" title="MathieuLabbe @ 2601:646:ca82:28b0:178f:b067:be17:c3d5[2601:646:ca82:28b0:178f:b067:be17:c3d5]">MathieuLabbe</a></span>)</p>




<div style="margin-top: 9px;" class="footer">
Except where otherwise noted, the ROS wiki is licensed under the <br><a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0</a>
<hr style="margin-top: 10px;">
<div class="row">
  <div class="col-md-4 col-md-offset-4">
<a href="https://www.openrobotics.org/"><img style="margin-top: -1px;" src="./rtabmap_ros_Tutorials_SetupOnYourRobot - ROS Wiki_files/brought_by_horiz.png"><p></p></a>
  </div>
</div>
</div>

  </div> <!-- /#dpage-inner, /#dpage -->





</body></html>